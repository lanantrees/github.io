<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Twikoo私有化部署</title>
      <link href="/2026/02/08/Twikoo%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2/"/>
      <url>/2026/02/08/Twikoo%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>对于使用 Hexo 搭建的静态博客而言，一个稳定、轻量的评论系统是连接读者的重要桥梁。Twikoo 作为目前最受欢迎的开源评论方案之一，除了官方提供的云开发版本外，私有化部署能让你获得完全的数据自主权——不再受限于免费额度，无需担心云厂商政策变动，还能通过自定义二级域名和 SSL 证书实现更专业、更稳定的访问体验。<br>本文将提供一份从零开始的实操指南，手把手教你通过 Docker 完成 Twikoo 的私有化部署。无论你是习惯命令行的开发者，还是偏好图形界面的宝塔用户，都能找到适合自己的部署方式。内容涵盖域名解析、容器配置、反向代理到证书申请的全流程，特别针对 AnZhiYu 等热门 Hexo 主题给出了详细的对接配置。跟随本文操作，你将拥有一个完全属于自己、独立运行的评论服务。</p><h2 id="准备：解析二级域名"><a href="#准备：解析二级域名" class="headerlink" title="准备：解析二级域名"></a>准备：解析二级域名</h2><p>建议为 Twikoo 单独分配一个二级域名（如 <code>twikoo.yourdomain.com</code>），便于后期维护和管理。</p><ul><li><strong>记录类型</strong>：A 记录</li><li><strong>主机记录</strong>：<code>twikoo</code>（或其他你喜欢的二级域名前缀）</li><li><strong>记录值</strong>：你的服务器 IP 地址</li></ul><blockquote><p><strong>提示</strong>：解析生效需要几分钟到几小时不等，可通过 <code>ping twikoo.yourdomain.com</code> 验证是否生效。</p></blockquote><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Twikoo%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2/image.png"></p><h2 id="拉起Twikoo的容器"><a href="#拉起Twikoo的容器" class="headerlink" title="拉起Twikoo的容器"></a>拉起Twikoo的容器</h2><h3 id="方案一：Docker-命令行部署（推荐）"><a href="#方案一：Docker-命令行部署（推荐）" class="headerlink" title="方案一：Docker 命令行部署（推荐）"></a>方案一：Docker 命令行部署（推荐）</h3><p>适合熟悉 Linux 命令的开发者，轻量且可控。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name twikoo -e TWIKOO_THROTTLE=1000 -p 8181:8080 -v <span class="variable">$&#123;PWD&#125;</span>/data:/app/data -d imaegoo/twikoo</span><br></pre></td></tr></table></figure><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Twikoo%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2/image1.png"></p><h3 id="方案二：宝塔面板部署（可视化）"><a href="#方案二：宝塔面板部署（可视化）" class="headerlink" title="方案二：宝塔面板部署（可视化）"></a>方案二：宝塔面板部署（可视化）</h3><p>适合不熟悉命令行或已安装宝塔面板的用户。</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Twikoo%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2/image2.png"></p><h2 id="配置反向代理"><a href="#配置反向代理" class="headerlink" title="配置反向代理"></a>配置反向代理</h2><p>直接使用 IP:端口 访问既不优雅也不安全。通过 Nginx 反向代理，可以实现：</p><ul><li>使用域名访问（如 <code>twikoo.yourdomain.com</code>）</li><li>后续支持 HTTPS（SSL 证书）</li><li>隐藏真实端口，提高安全性</li></ul><p>Nginx 配置示例,在宝塔 “网站” → “反向代理” 中添加：</p><ul><li>目标 URL：<code>http://127.0.0.1:8181</code>（即你刚才映射的本地端口）</li><li>发送域名：$host</li></ul><blockquote><p>原理：所有访问 <code>twikoo.yourdomain.com</code> 的请求，都会被 Nginx 转发到本地的 8181 端口，由 Twikoo 容器处理。</p></blockquote><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Twikoo%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2/image3.png"></p><h2 id="部署ssl证书"><a href="#部署ssl证书" class="headerlink" title="部署ssl证书"></a>部署ssl证书</h2><p>为保证数据传输安全，强烈建议配置 HTTPS。宝塔中操作如下：</p><ul><li>在刚才的反向代理站点中，点击 “SSL” 选项卡</li><li>选择 “Let’s Encrypt” 免费证书，或上传自己的证书</li><li>开启 “强制 HTTPS”</li></ul><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Twikoo%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2/imag4.png"></p><p>最后再浏览器访问你的Twikoo的域名，以下输出代表Twikoo部署已经完成</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Twikoo%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2/image5.png"></p><h2 id="开启评论功能"><a href="#开启评论功能" class="headerlink" title="开启评论功能"></a>开启评论功能</h2><p>下面可以参考安知鱼主题官方文档开启评论功能</p><p><a href="https://docs.anheyu.com/advanced/#%E8%AF%84%E8%AE%BA">安知鱼主题</a></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Twikoo%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2/image6.png"></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Twikoo%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2/image7.png"></p><p>到这里Twikoo就部署完成了,最后记得清除缓存和重新生成静态网站</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br></pre></td></tr></table></figure><h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p>Q：为什么选择私有化部署而非云开发？<br>A：云开发有免费额度限制（如腾讯云每日读取次数限制），私有化部署只要服务器不宕机就永久可用，数据完全自主可控。<br>Q：容器重启后数据会丢失吗？<br>A：不会。-v ${PWD}&#x2F;data:&#x2F;app&#x2F;data 已将数据持久化到宿主机，只要 data 文件夹在，重新运行容器数据依然保留。<br>Q：评论通知如何配置？<br>A：访问 Twikoo 管理后台（在评论区点击登录，输入管理员密码），在”设置”中配置 SMTP 邮箱或 webhook 推送。</p><p>至此，你拥有了一个完全独立的私有化评论系统！</p></div>]]></content>
      
      
      <categories>
          
          <category> 技术分享 </category>
          
          <category> Hexo </category>
          
          <category> Twikoo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术分享 </tag>
            
            <tag> Hexo </tag>
            
            <tag> Twikoo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从Miniflux 到 NextFlux：一步升级，拥抱现代化阅读体验</title>
      <link href="/2025/12/11/MiniFlux%E5%8D%87%E7%BA%A7NextFlux/"/>
      <url>/2025/12/11/MiniFlux%E5%8D%87%E7%BA%A7NextFlux/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><p>前段时间我部署了Miniflux，这是一款功能强大的极简主义RSS订阅器，它支持多平台同步、文章过滤和离线阅读等实用功能，完全满足了我的信息聚合需求；不过它的界面设计确实过于朴素，采用了最基础的列表布局和单调的配色方案，在这个视觉至上的时代里，这种毫不修饰的极简风格可能会让许多用户在初次接触时就失去耐心，随手划走转而选择那些界面更炫目、交互更花哨的阅读应用。</p><p>因此，为了弥补 Miniflux 在视觉和交互体验上的不足，我这次专门挑选了一款高颜值的第三方客户端 Nextflux。它不仅继承了 Miniflux 强大的 RSS 订阅和内容聚合功能，更通过现代化的界面设计、流畅的动画效果和直观的操作逻辑，大幅提升了用户的使用愉悦感。例如，Nextflux 支持暗黑模式与自定义主题，卡片式布局让信息浏览更加清晰高效，同时保留了 Miniflux 原有的离线阅读与全文抓取等核心能力，真正实现了功能与美感的平衡。</p><p>Nextflux 是一个基于现代化技术栈精心打造的 RSS 阅读器客户端，它专门为开源的Miniflux后端服务设计，完美融合了便捷性和功能性。该客户端采用前沿的React框架进行用户界面开发，并结合Vite这一高效构建工具，不仅确保了极速的热重载和流畅的开发体验，还优化了生产环境的打包性能，为用户提供轻量、响应迅速且高度可定制的阅读界面。无论是订阅源的智能管理、文章的分类筛选，还是跨设备的同步阅读，Nextflux都致力于提升信息获取的效率和舒适度，让用户能够专注于内容本身，而无需为技术细节分心。</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Nextflux/1.png"></p><p>Nextflux与Miniflux类似，同样采用轻量级的容器化部署方式，能够通过Docker或Podman等工具快速搭建和运行，极大简化了安装与维护流程；这种部署模式不仅确保了环境的一致性，还支持灵活扩展与版本管理，特别适合个人或小团队在云服务器、本地主机乃至树莓派等设备上高效部署，同时保持了低资源占用和高稳定性的特点。</p><p>由于之前部署了Miniflux下面就直接部署Nextflux了，当然再结尾也会附上Miniflux+Nextflux+DB的完整yml文件</p><p>使用下述命令直接拉起nextflux的容器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd  --restart unless-stopped  --name nextflux  -p 8121:3000    electh/nextflux:latest</span><br></pre></td></tr></table></figure><p>这里需要注意下Nextflux容器的端口</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Nextflux/2.png"></p><p>拉起容器后，直接通过宿主机的IP地址加上映射的8121端口（如<code>http://192.168.1.100:8121</code>）在浏览器中访问即可；若页面加载失败，通常是由于端口映射错误导致的，此时需要检查容器日志确认实际监听的端口号，既可以通过命令行方式查看（如执行<code>docker logs 容器ID</code>命令获取详细日志），也可以在宝塔面板的”容器管理”界面中直观地查看运行日志，此外还需确认服务器防火墙是否放行了该端口，这些都是导致访问失败的常见原因。</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Nextflux/3.png"></p><p>到这里基本上就可以看到Nextflux的登录界面了，我们可以看到这里除了用户名和密码外，还有个服务地址，这个服务地址就是Miniflux的访问地址，但是有几点需要注意</p><ul><li>如果你浏览器访问Nextflux的地址使用的是ip，那么服务地址这里就需要使用 <code>http://ip:port</code>，</li><li>如果你浏览器访问Nextflux的地址使用的域名，那么服务地址这里必须使用 <code>https://域名</code></li></ul><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Nextflux/4.png"></p><p>下面，我们来详细分析使用IP地址访问时出现”Failed to fetch”错误的问题：当按照本文的部署方式部署Nextflux和Miniflux后，即使使用同一IP地址访问也会遇到跨域问题，这是因为浏览器严格执行同源策略，会对比前端页面来源和API请求地址的协议、域名和端口是否完全一致。具体来说，假设你通过<code>http://140.143.94.243:8121</code>访问Nextflux前端界面，而该前端尝试向<code>http://140.143.94.243:80</code>的Miniflux后端发起API请求时，虽然IP地址相同，但由于端口号不同（8121 vs 80），浏览器会判定为跨域请求，此时浏览器会先发送一个OPTIONS预检请求来检查服务器是否允许跨域访问；如果Miniflux后端没有正确配置CORS头部信息，特别是缺少关键的Access-Control-Allow-Origin响应头，或者该头部的值不包含前端来源地址，浏览器就会直接拦截后续的实际请求，导致前端控制台报出”Failed to fetch”错误。要解决这个问题，最直接的方法是在启动Miniflux容器时添加两个必要的环境变量，这些配置会让Miniflux正确处理跨域请求并返回适当的CORS头部，修改后需要重启Miniflux容器使配置生效。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">environment:</span><br><span class="line">  - CORS_ORIGINS=http://140.143.94.243:8121</span><br><span class="line">  - CORS_ALLOW_HEADERS=*</span><br></pre></td></tr></table></figure><p>这里我建议直接使用宝塔面板的可视化操作界面进行操作，这样不仅能显著提高操作容错率，还能避免因手动输入命令导致的潜在错误；关于yml配置文件，我们可以直接复用之前部署Miniflux时使用的模板文件，只需在数据库配置部分额外添加这两个关键环境变量即可，完成这些修改后，直接保存配置文件即可生效，此时我们再次通过IP地址访问服务并进行登录操作，整个过程就会变得非常顺畅，不会再出现之前遇到的连接或认证问题，这种方案既保留了原有配置的稳定性，又通过最小改动实现了新功能的支持。</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Nextflux/5.png"></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Nextflux/6.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">services:</span><br><span class="line">  miniflux:</span><br><span class="line">    image: miniflux/miniflux:latest</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">&quot;8383:8080&quot;</span></span><br><span class="line">    depends_on:</span><br><span class="line">      db:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">    environment:</span><br><span class="line">      - DATABASE_URL=postgres://miniflux:admin@123@db/miniflux?sslmode=<span class="built_in">disable</span></span><br><span class="line">      - RUN_MIGRATIONS=1</span><br><span class="line">      - CREATE_ADMIN=1</span><br><span class="line">      - ADMIN_USERNAME=admin</span><br><span class="line">      - ADMIN_PASSWORD=admin@123</span><br><span class="line">  - CORS_ORIGINS=http://140.143.94.243:8121   <span class="comment">#填写你的实际ip和port</span></span><br><span class="line">      - CORS_ALLOW_HEADERS=*</span><br><span class="line">    healthcheck:</span><br><span class="line">      <span class="built_in">test</span>: [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;/usr/bin/miniflux&quot;</span>, <span class="string">&quot;-healthcheck&quot;</span>, <span class="string">&quot;auto&quot;</span>]</span><br><span class="line"></span><br><span class="line">  db:</span><br><span class="line">    image: postgres:17-alpine</span><br><span class="line">    environment:</span><br><span class="line">      - POSTGRES_USER=miniflux</span><br><span class="line">      - POSTGRES_PASSWORD=admin@123</span><br><span class="line">      - POSTGRES_DB=miniflux</span><br><span class="line">    volumes:</span><br><span class="line">      - miniflux-db:/var/lib/postgresql/data</span><br><span class="line">    healthcheck:</span><br><span class="line">      <span class="built_in">test</span>: [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;pg_isready&quot;</span>, <span class="string">&quot;-U&quot;</span>, <span class="string">&quot;miniflux&quot;</span>]</span><br><span class="line">      interval: 10s</span><br><span class="line">      start_period: 30s</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  miniflux-db:</span><br></pre></td></tr></table></figure><p>最后，我们重点讲解使用域名访问和登录时需要注意的技术细节，特别是关于HTTPS协议和URL格式规范的问题。当使用HTTPS协议访问Miniflux服务时，必须确保后端服务地址同样采用HTTPS协议，否则浏览器会因混合内容安全策略而阻止请求。这里特别要强调的是URL尾斜杠的处理问题：如果你在服务地址栏输入的是类似”<code>https://miniflux.mingliang.net.cn/</code>这样带有尾斜杠的地址，而前端JavaScript代码在拼接API路径时又没有正确处理这个斜杠，就会产生<code>https://miniflux.mingliang.net.cn**//**api/me</code>这样的双斜杠路径。这种URL格式错误虽然看起来很小，但会导致严重的后果：大多数现代Web服务器（如Nginx、Apache）会将其视为无效路径，返回404 Not Found错误；而浏览器端的fetch API则会抛出”Failed to fetch”的通用错误，给调试带来困难。这个问题在单页应用(SPA)开发中尤为常见，正确的做法应该是在配置文件中统一规范基础URL格式，或者在JavaScript代码中加入路径标准化处理逻辑，确保API请求的URL始终保持正确的单斜杠格式。</p><p>如果你之前没有部署过Miniflux这个轻量级RSS阅读器的话，使用docker-compose进行一体化安装是最便捷的方式，首先你需要创建一个名为docker-compose.yml的配置文件，将以下内容完整复制进去，其中包括了Miniflux服务及其必需的PostgreSQL数据库配置，确保网络设置和端口映射（通常Miniflux默认使用8080端口）正确无误后，在当前目录下执行docker-compose up -d命令即可启动容器编排，系统会自动拉取最新镜像并完成所有依赖服务的部署，整个过程无需手动干预，非常适合快速搭建个人阅读服务。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  miniflux:</span><br><span class="line">    image: miniflux/miniflux:latest</span><br><span class="line">    container_name: miniflux-server</span><br><span class="line">    restart: unless-stopped</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">&quot;8120:8080&quot;</span></span><br><span class="line">    depends_on:</span><br><span class="line">      db:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">    environment:</span><br><span class="line">      - DATABASE_URL=postgres://miniflux:secret@db/miniflux?sslmode=<span class="built_in">disable</span></span><br><span class="line">      - RUN_MIGRATIONS=1</span><br><span class="line">      - CREATE_ADMIN=1</span><br><span class="line">      - ADMIN_USERNAME=admin</span><br><span class="line">      - ADMIN_PASSWORD=test123</span><br><span class="line">  </span><br><span class="line">  db:</span><br><span class="line">    image: postgres:17-alpine</span><br><span class="line">    container_name: miniflux-db</span><br><span class="line">    restart: unless-stopped</span><br><span class="line">    environment:</span><br><span class="line">      - POSTGRES_USER=miniflux</span><br><span class="line">      - POSTGRES_PASSWORD=secret</span><br><span class="line">      - POSTGRES_DB=miniflux</span><br><span class="line">    volumes:</span><br><span class="line">      - ./data:/var/lib/postgresql/data</span><br><span class="line">    healthcheck:</span><br><span class="line">      <span class="built_in">test</span>: [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;pg_isready&quot;</span>, <span class="string">&quot;-U&quot;</span>, <span class="string">&quot;miniflux&quot;</span>]</span><br><span class="line">      interval: 10s</span><br><span class="line">      start_period: 30s</span><br><span class="line"></span><br><span class="line">  nextflux:</span><br><span class="line">    image: electh/nextflux:latest</span><br><span class="line">    container_name: miniflux-nextflux</span><br><span class="line">    restart: unless-stopped</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">&quot;8121:80&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>这种联合部署的方式Eucalyptus之前确实没有尝试过，主要参考了AWS和Azure的混合云架构设计思路，并结合了《云计算架构设计模式》一书中提到的服务网格集成方案，如果有任何配置问题或性能优化建议，欢迎各位技术同行在评论区留言讨论。另外Eucalyptus部署的Nextflux测试环境已经稳定运行两周，访问地址是<a href="https://blog.mingliang.net.cn/go/?url=https://nextflux.mingliang.net.cn">https://nextflux.mingliang.net.cn</a>，该平台集成了实时数据流处理和可视化分析功能，各位朋友如果需要测试体验的话可以留言说明具体，Eucalyptus会根据使用场景为大家提供免费的测试账号。</p></div>]]></content>
      
      
      <categories>
          
          <category> 技术分享 </category>
          
          <category> RSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术分享 </tag>
            
            <tag> RSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MiniFlux安全升级</title>
      <link href="/2025/11/08/MiniFlux%E5%AE%89%E5%85%A8%E5%8D%87%E7%BA%A7/"/>
      <url>/2025/11/08/MiniFlux%E5%AE%89%E5%85%A8%E5%8D%87%E7%BA%A7/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><p>在信息过载的时代，RSS 依旧是高效获取优质内容的“净土”。Miniflux 以轻量、简洁、开源的姿态，成为许多技术人自托管 RSS 的首选。然而，只在内网 IP 下阅读未免辜负了它的优雅；给 Miniflux 配一个专属的二级域名，再披上 HTTPS 的“安全外衣”，不仅能让阅读随时随地、安全无虞，更是对自己数字领地的一次仪式感升级。接下来的篇幅，我们一起把<code>localhost:8383</code>变成<code>https://miniflux.mingliang.net.cn/</code>，让每一次订阅与更新都拥有值得收藏的新地址。</p><p>首先本篇文章中使用的是二级域名，大伙都知道域名是需要进行备案的，“而二级域名需不需要备案”取决于它的一级域名是否已经取得备案号，以及二者是否使用同一家云接入商，大致分为以下几种情况。</p><ul><li>一级域名已备案，且二级域名与一级域名在同一接入商 → 二级域名无需单独备案。</li><li>一级域名已备案，但二级域名要换到另一家国内接入商 → 先做一次“新增接入备案”，等通过后才能解析到新 IP。</li><li>一级域名没有任何备案号 → 必须先把一级域名提交首次备案，二级域名才能在中国大陆正常访问。</li><li>政府&#x2F;事业单位的<code>.gov.cn</code>等后缀二级域名 → 无论一级域名是否已备案，都要单独备案。</li></ul><p>只要网站服务器放在中国大陆，访问者能直接通过二级域名打开网页，就适用上述规则；如果服务器在境外，理论上不受中国备案系统约束，但国内 DNS&#x2F;CDN 厂商通常仍会提示“一级域名需已备案”才能开启加速或防护功能。</p><p>备案就不过多赘述了，如果不清楚的，可以参考下这篇文章：<a href="https://blog.mingliang.net.cn/go/?url=https://blog.csdn.net/weixin_72610956/article/details/135545236">网站ICP备案和公安备案教程</a>，下面直接进行二级域名解析教程</p><p>这里以阿里云为例，在一级域名中添加一条解析记录时，首先需要登录阿里云控制台并进入域名解析管理页面，在DNS解析设置中选择”添加记录”选项，这里的记录类型可以根据实际需求选择A类型（用于将域名指向IPv4地址），主机记录则填写你的二级域名前缀（如”www”或”blog”等），记录值需要填写对应服务器的公网IP地址（对于A记录），TTL（生存时间）通常保持默认值即可，但也可以根据业务需求进行调整，设置完成后点击确认即可完成解析记录的添加，一般情况下解析会在10分钟内生效，但受各地DNS缓存影响，全球完全生效可能需要24-48小时。</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/MiniFlux%E5%AE%89%E5%85%A8%E5%8D%87%E7%BA%A7/1.png"></p><p>接下来进行Nginx反向代理的配置，全程使用宝塔面板的可视化界面操作，首先登录宝塔面板后，在左侧导航栏找到”网站”模块并点击进入，在菜单中选择”反向代理”选项，这时会显示当前站点的反向代理配置页面，然后点击左上角的”添加反向代理”按钮</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/MiniFlux%E5%AE%89%E5%85%A8%E5%8D%87%E7%BA%A7/2.png"></p><p>在域名配置栏中，需要填写之前在域名控制台已解析完成的二级域名（如”test.example.com”），目标URL地址则应填写本地服务器地址<code>http://127.0.0.1</code>并加上对应的服务端口号（例如<code>:8383</code>表示该服务运行在8383端口），发送域名host保持默认设置即可（通常为自动填充的当前域名），备注栏可根据实际需求填写该条记录的相关说明（如”测试环境API服务”或”开发调试用”等描述性内容），确认所有信息无误后点击保存按钮完成配置。</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/MiniFlux%E5%AE%89%E5%85%A8%E5%8D%87%E7%BA%A7/3.png"></p><p>最后为刚才配置的反向代理服务开启HTTPS加密连接，首先在控制面板中找到并点击刚才添加的反向代理条目右侧的设置按钮，在弹出的菜单中选择”SSL”选项，然后选择<code>Let’sL Encrypt</code>免费证书服务，系统会自动验证域名所有权并生成证书请求，验证通过后点击”申请证书”按钮，等待证书签发完成后，务必记得点击”部署”按钮将证书应用到当前反向代理配置中，这样就能为网站流量提供端到端的加密保护，有效防止数据在传输过程中被窃听或篡改，同时还能提升网站在搜索引擎中的排名。</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/MiniFlux%E5%AE%89%E5%85%A8%E5%8D%87%E7%BA%A7/4.png"></p><p>到这里Miniflux 安全升级的全部部署工作已经圆满完成，我们不仅为Eucalyptus的个人RSS阅读器Miniflux绑定了专属域名miniflux.mingliang.net.cn，还成功配置了HTTPS加密协议，确保数据传输的安全性，现在您可以通过<a href="https://blog.mingliang.net.cn/go/?url=https://miniflux.mingliang.net.cn/">https://miniflux.mingliang.net.cn/</a>这个安全链接访问这个清爽简洁的RSS聚合平台，该平台采用Go语言开发，具有极低的资源占用和快速的响应速度，特别适合追求高效阅读体验的用户，如果您对这款轻量级RSS阅读器感兴趣，想要亲自体验它的强大功能，比如文章分类管理、快捷键操作、多设备同步等特性，欢迎在评论区留言，Eucalyptus会热情地为每位感兴趣的朋友创建专属测试账号，让您零门槛感受Miniflux的独特魅力。</p></div>]]></content>
      
      
      <categories>
          
          <category> 技术分享 </category>
          
          <category> RSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术分享 </tag>
            
            <tag> RSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Miniflux – RSS 订阅</title>
      <link href="/2025/10/07/Miniflux-%E2%80%93-RSS-%E8%AE%A2%E9%98%85/"/>
      <url>/2025/10/07/Miniflux-%E2%80%93-RSS-%E8%AE%A2%E9%98%85/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><h2 id="什么是Miniflux"><a href="#什么是Miniflux" class="headerlink" title="什么是Miniflux"></a>什么是Miniflux</h2><p>Miniflux 是一个用 Go 写的极简开源 RSS 阅读器，单二进制 +内建 Web UI，五分钟就能容器化跑起来；它默认 Fever API、内存占用极低，界面干净无广告，适合只想安静看文章、不想折腾样式插件的极简党。</p><h3 id="核心功能与特点"><a href="#核心功能与特点" class="headerlink" title="核心功能与特点"></a>核心功能与特点</h3><ul><li>极简设计 ：功能精简，专注于核心阅读体验。</li><li>高性能 ：基于 Go 语言开发，单二进制文件，无依赖。</li><li>轻量且快速 ：资源占用低，响应迅速。</li><li>现代技术栈 ：使用现代 JavaScript（ES6 和 Fetch API），无复杂框架。</li><li>单一数据库支持 ：仅支持 PostgreSQL，确保数据一致性和性能。</li><li>易于安装 ：提供 Docker 镜像，一键部署。</li></ul><h3 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h3><ul><li>极简主义爱好者：追求简洁、高效的新闻阅读体验。</li><li>开发者：通过 API 集成到其他应用中。</li><li>低资源环境：在树莓派等低性能设备上运行。</li></ul><h3 id="官方地址"><a href="#官方地址" class="headerlink" title="官方地址"></a>官方地址</h3><ul><li>官方网站：<a href="https://blog.mingliang.net.cn/go/?url=https://miniflux.app/">https://miniflux.app</a></li><li>GitHub 仓库：<a href="https://github.com/miniflux/v2">https://github.com/miniflux/v2</a></li></ul><h2 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h2><p>在开始部署之前，请确保你的系统已经安装了 Docker 和 Docker Compose。如果尚未安装，请参考Eucalyptus写的<a href="https://blog.mingliang.net.cn/go/?url=https://blog.csdn.net/weixin_72610956/article/details/131507884">Centos7下安装Docker-CSDN博客</a> ，</p><h2 id="创建-Docker-Compose-配置文件"><a href="#创建-Docker-Compose-配置文件" class="headerlink" title="创建 Docker Compose 配置文件"></a>创建 Docker Compose 配置文件</h2><h3 id="命令行部署"><a href="#命令行部署" class="headerlink" title="命令行部署"></a>命令行部署</h3><p>首先登录你部署Miniflux的服务器，然后创建个docker-compose.yml文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">services:</span><br><span class="line">  miniflux:</span><br><span class="line">    image: miniflux/miniflux:latest</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">&quot;80:8080&quot;</span></span><br><span class="line">    depends_on:</span><br><span class="line">      db:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">    environment:</span><br><span class="line">      - DATABASE_URL=postgres://miniflux:admin@123@db/miniflux?sslmode=<span class="built_in">disable</span></span><br><span class="line">      - RUN_MIGRATIONS=1</span><br><span class="line">      - CREATE_ADMIN=1</span><br><span class="line">      - ADMIN_USERNAME=admin</span><br><span class="line">      - ADMIN_PASSWORD=admin@123</span><br><span class="line">    healthcheck:</span><br><span class="line">      <span class="built_in">test</span>: [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;/usr/bin/miniflux&quot;</span>, <span class="string">&quot;-healthcheck&quot;</span>, <span class="string">&quot;auto&quot;</span>]</span><br><span class="line"></span><br><span class="line">  db:</span><br><span class="line">    image: postgres:17-alpine</span><br><span class="line">    environment:</span><br><span class="line">      - POSTGRES_USER=miniflux          <span class="comment"># 与 DATABASE_URL 用户一致</span></span><br><span class="line">      - POSTGRES_PASSWORD=admin@123</span><br><span class="line">      - POSTGRES_DB=miniflux</span><br><span class="line">    volumes:</span><br><span class="line">      - miniflux-db:/var/lib/postgresql/data   <span class="comment"># 官方默认路径</span></span><br><span class="line">    healthcheck:</span><br><span class="line">      <span class="built_in">test</span>: [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;pg_isready&quot;</span>, <span class="string">&quot;-U&quot;</span>, <span class="string">&quot;miniflux&quot;</span>]  <span class="comment"># 用户一致</span></span><br><span class="line">      interval: 10s</span><br><span class="line">      start_period: 30s</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  miniflux-db:</span><br></pre></td></tr></table></figure><p>接下来再当前目录下直接执行下述命令即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/MiniFlux%20Rss/1.png"></p><h3 id="宝塔可视化部署"><a href="#宝塔可视化部署" class="headerlink" title="宝塔可视化部署"></a>宝塔可视化部署</h3><p>当然也可完全使用宝塔可视化部署，在宝塔中的docker容器编排这里部署</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/MiniFlux%20Rss/2.png"></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/MiniFlux%20Rss/3.png"></p><p>compose内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&quot;3.9&quot;</span></span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  miniflux:</span><br><span class="line">    image: miniflux/miniflux:latest</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">&quot;<span class="variable">$&#123;MINIFLUX_PORT&#125;</span>:8080&quot;</span>          <span class="comment"># ← 变量</span></span><br><span class="line">    depends_on:</span><br><span class="line">      db:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">    environment:</span><br><span class="line">      - DATABASE_URL=postgres://<span class="variable">$&#123;DB_USER&#125;</span>:<span class="variable">$&#123;DB_PASS&#125;</span>@db/<span class="variable">$&#123;DB_NAME&#125;</span>?sslmode=<span class="built_in">disable</span></span><br><span class="line">      - RUN_MIGRATIONS=1</span><br><span class="line">      - CREATE_ADMIN=1</span><br><span class="line">      - ADMIN_USERNAME=<span class="variable">$&#123;ADMIN_USER&#125;</span></span><br><span class="line">      - ADMIN_PASSWORD=<span class="variable">$&#123;ADMIN_PASS&#125;</span></span><br><span class="line">    healthcheck:</span><br><span class="line">      <span class="built_in">test</span>: [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;/usr/bin/miniflux&quot;</span>, <span class="string">&quot;-healthcheck&quot;</span>, <span class="string">&quot;auto&quot;</span>]</span><br><span class="line"></span><br><span class="line">  db:</span><br><span class="line">    image: postgres:17-alpine</span><br><span class="line">    environment:</span><br><span class="line">      - POSTGRES_USER=<span class="variable">$&#123;DB_USER&#125;</span></span><br><span class="line">      - POSTGRES_PASSWORD=<span class="variable">$&#123;DB_PASS&#125;</span></span><br><span class="line">      - POSTGRES_DB=<span class="variable">$&#123;DB_NAME&#125;</span></span><br><span class="line">    volumes:</span><br><span class="line">      - miniflux-db:/var/lib/postgresql/data</span><br><span class="line">    healthcheck:</span><br><span class="line">      <span class="built_in">test</span>: [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;pg_isready&quot;</span>, <span class="string">&quot;-U&quot;</span>, <span class="string">&quot;<span class="variable">$&#123;DB_USER&#125;</span>&quot;</span>]</span><br><span class="line">      interval: 10s</span><br><span class="line">      start_period: 30s</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  miniflux-db:</span><br></pre></td></tr></table></figure><p>.env内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Miniflux 外部端口</span></span><br><span class="line">MINIFLUX_PORT=80</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库三要素</span></span><br><span class="line">DB_USER=miniflux</span><br><span class="line">DB_PASS=admin@123</span><br><span class="line">DB_NAME=miniflux</span><br><span class="line"></span><br><span class="line"><span class="comment"># 管理员账号</span></span><br><span class="line">ADMIN_USER=admin</span><br><span class="line">ADMIN_PASS=admin@123</span><br></pre></td></tr></table></figure><h3 id="Miniflux订阅RSS"><a href="#Miniflux订阅RSS" class="headerlink" title="Miniflux订阅RSS"></a>Miniflux订阅RSS</h3><p>到这里Miniflux已经部署完成了，接下来在浏览器访问<code>http://&lt;IP&gt;:80</code>即可，ip使用你部署Miniflux服务器的公网ip，Miniflux的用户是admin，密码是admin@123，pg的用户名是miniflux，密码是admin@123</p><p>输入Miniflux密码进行登录</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/MiniFlux%20Rss/4.png"></p><p>刚进去的是英文界面，可以在set设置简体中文</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/MiniFlux%20Rss/5.png"></p><p>然后添加订阅源，输入你要订阅BLOG的RSS地址例如：<code>https://mingliang.net.cn/feed/</code></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/MiniFlux%20Rss/6.png"></p><p>然后就可以看到BLOG的文章内容了</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/MiniFlux%20Rss/7.png"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>到这里Miniflux就完成了部署并且订阅了Blog的RSS，整个过程仅需几分钟就能搭建起一个轻量高效的RSS阅读平台，你可以通过网页端随时随地获取最新内容更新，无需担心广告干扰或算法推荐；如果你不方便自行部署的话，可以_<strong>留言申请Eucalyptus</strong>_部署的Miniflux服务的用户名进行体验，我们提供免费的测试账号供你试用一周，期间你可以完整体验Miniflux的所有功能，包括多设备同步、快捷键操作、文章收藏等特色功能，感受这款开源RSS阅读器的简洁与高效。</p></div>]]></content>
      
      
      <categories>
          
          <category> 技术分享 </category>
          
          <category> RSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术分享 </tag>
            
            <tag> RSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Wordpress登录页面DIY</title>
      <link href="/2025/09/01/%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2DIY/"/>
      <url>/2025/09/01/%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2DIY/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><p>由于部分WordPress主题在默认配置下没有对后台登录界面进行定制化开发，用户只能使用系统自带的原生登录页面，这种页面往往设计简陋、缺乏品牌特色，与网站整体风格格格不入，影响了用户体验和品牌形象；为此，我通过深入研究WordPress的login_head和login_footer钩子，对原生登录页面进行了全面的二次开发，不仅替换了默认的WordPress logo为网站品牌标识，还重新设计了登录表单的布局和配色方案，增加了背景图片和CSS3动画效果，同时优化了移动端的响应式布局，使登录页面与网站主题风格完美统一，大大提升了后台管理的专业性和视觉体验。</p><blockquote><p>源码下载地址：<a href="https://blog.mingliang.net.cn/go/?url=https://gitcode.com/weixin_72610956/Blog/tree/login">https://gitcode.com/weixin_72610956&#x2F;Blog&#x2F;tree&#x2F;login</a></p></blockquote><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2DIY/1.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#下述了两个代码文件均放置到主题目录下的自建self-innovate文件中</span></span><br><span class="line">login-style.php</span><br><span class="line">login-style.css</span><br></pre></td></tr></table></figure><p>核心代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">/**</span><br><span class="line"> * 登录页美化（Logo 完全禁用点击）</span><br><span class="line"> */</span><br><span class="line">add_action( &#x27;login_enqueue_scripts&#x27;, function () &#123;</span><br><span class="line">    wp_enqueue_style( &#x27;my-login&#x27;, get_theme_file_uri( &#x27;/self-innovate/login-style.css&#x27; ), [], &#x27;1.0.0&#x27; );</span><br><span class="line">&#125; );</span><br><span class="line"></span><br><span class="line">/* 完全移除 &lt;a&gt; 的 href，避免刷新 */</span><br><span class="line">add_filter( &#x27;login_headerurl&#x27;, function () &#123;</span><br><span class="line">    return &#x27;javascript:void(0);&#x27;;   // 真正无动作</span><br><span class="line">&#125; );</span><br><span class="line"></span><br><span class="line">/* 悬停文字留空，防止提示 */</span><br><span class="line">add_filter( &#x27;login_headertext&#x27;, &#x27;__return_empty_string&#x27; );</span><br></pre></td></tr></table></figure><p>下述是css代码，需替换css中body.login和login::before的background:url(”)路径</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">/* 1. 背景与斜遮罩 */</span><br><span class="line">body.login&#123;</span><br><span class="line">  height:100vh;</span><br><span class="line">  margin:0;</span><br><span class="line">  display:flex;</span><br><span class="line">  align-items:center;</span><br><span class="line">  justify-content:center;</span><br><span class="line">  background:url(<span class="string">&#x27;https://mingliang.net.cn/wp-content/uploads/2025/05/16-scaled.jpg&#x27;</span>) center/cover no-repeat;</span><br><span class="line">  position:relative;</span><br><span class="line">&#125;</span><br><span class="line">body.login::before&#123;</span><br><span class="line">  content:<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  position:absolute;</span><br><span class="line">  inset:0;</span><br><span class="line">  background:linear-gradient(-75deg, transparent 0% 50%, rgba(255,255,255,.6) 50% 100%);</span><br><span class="line">  z-index:1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 2. 登录框整体定位与 Logo */</span><br><span class="line"><span class="comment">#login&#123;</span></span><br><span class="line">  position:relative;</span><br><span class="line">  z-index:2;</span><br><span class="line">  width:340px;</span><br><span class="line">  padding:40px 40px 40px; /* 40px+140px空间已含在顶部padding */</span><br><span class="line">  padding-top:140px;      /* 给Logo留空间 */</span><br><span class="line">  margin-left:150px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#login::before&#123;           /* Logo伪元素 */</span></span><br><span class="line">  content:<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  position:absolute;</span><br><span class="line">  top:20px;</span><br><span class="line">  left:50%;</span><br><span class="line">  transform:translateX(-50%);</span><br><span class="line">  width:160px;</span><br><span class="line">  aspect-ratio:1;</span><br><span class="line">  background:url(<span class="string">&#x27;https://lanantrees.mingliang.net.cn/logo/logo1.png&#x27;</span>) center/contain no-repeat;</span><br><span class="line">  pointer-events:none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 3. 表单 */</span><br><span class="line">body.login form#loginform&#123;</span><br><span class="line">  margin:24px 0 !important;</span><br><span class="line">  padding:26px 24px !important;</span><br><span class="line">  box-shadow:0 1px 3px rgba(0,0,0,.04) !important;</span><br><span class="line">  background:transparent !important;</span><br><span class="line">  border:none !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 4. 文字Logo */</span><br><span class="line">.login h1 a&#123;</span><br><span class="line">  background:none !important;</span><br><span class="line">  text-indent:0;</span><br><span class="line">  width:auto;</span><br><span class="line">  height:auto;</span><br><span class="line">  font:700 24px/1.2 sans-serif;</span><br><span class="line">  color:#333;</span><br><span class="line">  margin-bottom:24px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 5. 输入框 */</span><br><span class="line">.login form .input&#123;</span><br><span class="line">  border:1px solid <span class="comment">#e1e5e9;</span></span><br><span class="line">  border-radius:8px;</span><br><span class="line">  padding:12px 16px;</span><br><span class="line">  font-size:15px;</span><br><span class="line">  transition:border-color .3s, box-shadow .3s;</span><br><span class="line">&#125;</span><br><span class="line">.login form .input:focus&#123;</span><br><span class="line">  border-color:#667eea;</span><br><span class="line">  box-shadow:0 0 0 2px rgba(102,126,234,.25);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 6. 按钮 */</span><br><span class="line">.wp-core-ui .button-primary&#123;</span><br><span class="line">  width:100%;</span><br><span class="line">  border:none;</span><br><span class="line">  border-radius:30px;</span><br><span class="line">  padding:12px 0;</span><br><span class="line">  font:600 16px/1 sans-serif;</span><br><span class="line">  background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);</span><br><span class="line">  transition:transform .3s;</span><br><span class="line">&#125;</span><br><span class="line">.wp-core-ui .button-primary:hover&#123;</span><br><span class="line">  transform:translateY(-2px);</span><br><span class="line">  box-shadow:0 6px 20px rgba(102,126,234,.45);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 7. 隐藏语言切换 */</span><br><span class="line"><span class="comment">#language-switcher&#123;display:none !important;&#125;</span></span><br></pre></td></tr></table></figure><p>最后需再functions.php中调用该模块</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require_once get_theme_file_path( <span class="string">&#x27;/self-innovate/login-style.php&#x27;</span> );</span><br></pre></td></tr></table></figure></div>]]></content>
      
      
      <categories>
          
          <category> 技术分享 </category>
          
          <category> Wordpress </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Wordpress </tag>
            
            <tag> 技术分享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Meteor主题友链页面自研</title>
      <link href="/2025/08/31/Meteor%E4%B8%BB%E9%A2%98%E5%8F%8B%E9%93%BE%E9%A1%B5%E9%9D%A2%E8%87%AA%E7%A0%94/"/>
      <url>/2025/08/31/Meteor%E4%B8%BB%E9%A2%98%E5%8F%8B%E9%93%BE%E9%A1%B5%E9%9D%A2%E8%87%AA%E7%A0%94/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><p>Meteor主题虽然设计简约现代，但由于缺乏原生的友情链接管理功能，许多博主只能将友情链接勉强添加在网站底部，这不仅影响页面美观，也不便于访客查找和互动；为了解决这一痛点，本博主对主题进行了深度二次开发，专门打造了一个独立的友情链接页面，该页面不仅实现了友链分类展示、图文混排等基本功能，更创新性地开发了前端提交表单，允许其他站长直接在线提交申请，同时配套开发了完善的后台审核系统，管理员可以便捷地查看申请信息、审核状态，并一键通过或拒绝，整个流程实现了自动化闭环管理，大大提升了友链交换的效率和用户体验。</p><blockquote><p>源码下载地址：<a href="https://blog.mingliang.net.cn/go/?url=https://gitcode.com/weixin_72610956/Blog/tree/link">https://gitcode.com/weixin_72610956&#x2F;Blog&#x2F;tree&#x2F;link</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">default-avatar.jpg</span><br><span class="line">page-links.css</span><br><span class="line">page-links.js</span><br><span class="line">pending-links.php</span><br></pre></td></tr></table></figure><p>以下是核心代码部分，这段代码实现了系统的关键功能，</p><p>并且这里对友链头像有三个判断的逻辑</p><ul><li>有头像 → 正常显示；</li><li>无头像 → 立即显示默认头像；</li><li>有头像但 3 秒仍未加载完成 → 自动替换成默认头像。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Template Name: 友情链接</span></span><br><span class="line"><span class="comment"> * Description:  极简友链模板（样式/脚本已分离，含评论）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">get_header</span>(); </span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">hero</span>-<span class="title">title</span>&quot;&gt;</span></span><br><span class="line"><span class="class">  &lt;?<span class="title">php</span> <span class="title">the_title</span>( &#x27;&lt;<span class="title">h1</span>&gt;&#x27;, &#x27;&lt;/<span class="title">h1</span>&gt;&#x27; ); ?&gt;</span></span><br><span class="line"><span class="class">  &lt;<span class="title">p</span> <span class="title">class</span>=&quot;<span class="title">hero</span>-<span class="title">sub</span>&quot;&gt;欢迎交换友链 · 携手点亮彼此的星空&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;!-- 载入独立样式 --&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">link</span> <span class="title">rel</span>=&quot;<span class="title">stylesheet</span>&quot; <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> <span class="title">echo</span> <span class="title">get_template_directory_uri</span>(); ?&gt;/<span class="title">self</span>-<span class="title">innovate</span>/<span class="title">page</span>-<span class="title">links</span>.<span class="title">css</span>&quot;&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">page</span>-<span class="title">links</span>&quot;&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  &lt;!-- 搜索框 --&gt;</span></span><br><span class="line"><span class="class">  &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">link</span>-<span class="title">search</span>&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">text</span>&quot; <span class="title">id</span>=&quot;<span class="title">link</span>-<span class="title">search</span>&quot; <span class="title">placeholder</span>=&quot;搜索站点名称或描述…&quot;&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  &lt;!-- 友链列表 --&gt;</span></span><br><span class="line"><span class="class">  &lt;?<span class="title">php</span></span></span><br><span class="line"><span class="class">  $<span class="title">cats</span> = <span class="title">get_terms</span>( &#x27;<span class="title">link_category</span>&#x27;, <span class="title">array</span>( &#x27;<span class="title">hide_empty</span>&#x27; =&gt; 0 ) );</span></span><br><span class="line"><span class="class">  <span class="title">foreach</span> ( $<span class="title">cats</span> <span class="title">as</span> $<span class="title">cat</span> ) :</span></span><br><span class="line"><span class="class">    $<span class="title">bookmarks</span> = <span class="title">get_bookmarks</span>( <span class="title">array</span>(</span></span><br><span class="line"><span class="class">      &#x27;<span class="title">category</span>&#x27; =&gt; $<span class="title">cat</span>-&gt;<span class="title">term_id</span>,</span></span><br><span class="line"><span class="class">      &#x27;<span class="title">orderby</span>&#x27;  =&gt; &#x27;<span class="title">rating</span>&#x27;,</span></span><br><span class="line"><span class="class">      &#x27;<span class="title">order</span>&#x27;    =&gt; &#x27;<span class="title">DESC</span>&#x27;</span></span><br><span class="line"><span class="class">    ) );</span></span><br><span class="line"><span class="class">    <span class="title">if</span> ( <span class="title">empty</span>( $<span class="title">bookmarks</span> ) ) <span class="title">continue</span>;</span></span><br><span class="line"><span class="class">  ?&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">link</span>-<span class="title">cat</span>&quot;&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">h2</span>&gt;&lt;?<span class="title">php</span> <span class="title">echo</span> <span class="title">esc_html</span>( $<span class="title">cat</span>-&gt;<span class="title">name</span> ); ?&gt;&lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;?<span class="title">php</span> <span class="title">if</span> ( ! <span class="title">empty</span>( $<span class="title">cat</span>-&gt;<span class="title">description</span> ) ) : ?&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">p</span> <span class="title">class</span>=&quot;<span class="title">link</span>-<span class="title">cat</span>-<span class="title">desc</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">echo</span> <span class="title">esc_html</span>( $<span class="title">cat</span>-&gt;<span class="title">description</span> ); ?&gt;&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">links</span>&quot;&gt;</span></span><br><span class="line"><span class="class">      &lt;?<span class="title">php</span> <span class="title">foreach</span> ( $<span class="title">bookmarks</span> <span class="title">as</span> $<span class="title">link</span> ) : ?&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">a</span> <span class="title">class</span>=&quot;<span class="title">link</span>-<span class="title">card</span>&quot; <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> <span class="title">echo</span> <span class="title">esc_url</span>( $<span class="title">link</span>-&gt;<span class="title">link_url</span> ); ?&gt;&quot; <span class="title">target</span>=&quot;<span class="title">_blank</span>&quot; <span class="title">rel</span>=&quot;<span class="title">noopener</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">img</span></span></span><br><span class="line"><span class="class">          <span class="title">src</span>=&quot;&lt;?<span class="title">php</span> <span class="title">echo</span> <span class="title">esc_url</span>( $<span class="title">link</span>-&gt;<span class="title">link_image</span> ?: &#x27;&#x27; ); ?&gt;&quot;</span></span><br><span class="line"><span class="class">          <span class="title">data</span>-<span class="title">default</span>=&quot;&lt;?<span class="title">php</span> <span class="title">echo</span> <span class="title">esc_url</span>( <span class="title">get_template_directory_uri</span>() . &#x27;/<span class="title">self</span>-<span class="title">innovate</span>/<span class="title">default</span>-<span class="title">avatar</span>.<span class="title">jpg</span>&#x27; ); ?&gt;&quot;</span></span><br><span class="line"><span class="class">          <span class="title">alt</span>=&quot;&lt;?<span class="title">php</span> <span class="title">echo</span> <span class="title">esc_attr</span>( $<span class="title">link</span>-&gt;<span class="title">link_name</span> ); ?&gt;&quot;</span></span><br><span class="line"><span class="class">          <span class="title">onerror</span>=&quot;<span class="title">this</span>.<span class="title">src</span>=<span class="title">this</span>.<span class="title">dataset</span>.<span class="title">default</span>&quot;</span></span><br><span class="line"><span class="class">          <span class="title">onload</span>=&quot;<span class="title">clearTimeout</span>(<span class="title">this</span>.<span class="title">t</span>)&quot;</span></span><br><span class="line"><span class="class">          <span class="title">ontimeout</span>=&quot;<span class="title">this</span>.<span class="title">src</span>=<span class="title">this</span>.<span class="title">dataset</span>.<span class="title">default</span>&quot;</span></span><br><span class="line"><span class="class">      /&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">          (<span class="title">function</span>(<span class="title">img</span>)</span>&#123;</span><br><span class="line">            img.t = <span class="title function_ invoke__">setTimeout</span>(function()&#123; img.src = img.dataset.<span class="keyword">default</span>; &#125;, <span class="number">3000</span>);</span><br><span class="line">          &#125;)(document.currentScript.previousElementSibling);</span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">info</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">name</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">echo</span> <span class="title">esc_html</span>( $<span class="title">link</span>-&gt;<span class="title">link_name</span> ); ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">desc</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">echo</span> <span class="title">esc_html</span>( $<span class="title">link</span>-&gt;<span class="title">link_description</span> ); ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">          &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;?<span class="title">php</span> <span class="title">endforeach</span>; ?&gt;</span></span><br><span class="line"><span class="class">      &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;?<span class="title">php</span> <span class="title">endforeach</span>; ?&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;!-- 后台内容显示 --&gt;</span></span><br><span class="line"><span class="class">  &lt;?<span class="title">php</span> <span class="title">if</span> ( <span class="title">get_the_content</span>() ) : ?&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">link</span>-<span class="title">intro</span>&quot; <span class="title">style</span>=&quot;<span class="title">margin</span>-<span class="title">bottom</span>:30<span class="title">px</span>;&quot;&gt;&lt;?<span class="title">php</span> <span class="title">the_content</span>(); ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  </span></span><br><span class="line"><span class="class">  &lt;!-- 友链申请弹窗 --&gt;</span></span><br><span class="line"><span class="class">  &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">btn</span>-<span class="title">center</span>&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">button</span> <span class="title">id</span>=&quot;<span class="title">open</span>-<span class="title">link</span>-<span class="title">modal</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span>-<span class="title">hero</span>&quot;&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">span</span>&gt;申请交换友链&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  &lt;!-- ===== 评论区 ===== --&gt;</span></span><br><span class="line"><span class="class">    &lt;?<span class="title">php</span></span></span><br><span class="line"><span class="class">    // <span class="title">while</span> ( <span class="title">have_posts</span>() ) : <span class="title">the_post</span>();</span></span><br><span class="line"><span class="class">        <span class="title">if</span> ( <span class="title">comments_open</span>() || <span class="title">get_comments_number</span>() ) : ?&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">section</span> <span class="title">class</span>=&quot;<span class="title">link</span>-<span class="title">comments</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">h2</span> <span class="title">class</span>=&quot;<span class="title">comments</span>-<span class="title">title</span>&quot;&gt;&lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;?<span class="title">php</span> <span class="title">comments_template</span>(); ?&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">section</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span></span></span><br><span class="line"><span class="class">        <span class="title">endif</span>;</span></span><br><span class="line"><span class="class">    // <span class="title">endwhile</span>;</span></span><br><span class="line"><span class="class">    ?&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  &lt;!-- 弹窗 --&gt;</span></span><br><span class="line"><span class="class">  &lt;<span class="title">div</span> <span class="title">id</span>=&quot;<span class="title">link</span>-<span class="title">modal</span>-<span class="title">overlay</span>&quot; <span class="title">class</span>=&quot;<span class="title">modal</span>-<span class="title">fade</span>&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">modal</span>-<span class="title">dialog</span>&quot;&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">button</span> <span class="title">class</span>=&quot;<span class="title">modal</span>-<span class="title">close</span>&quot; <span class="title">aria</span>-<span class="title">label</span>=&quot;关闭&quot;&gt;×&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">h3</span> <span class="title">class</span>=&quot;<span class="title">modal</span>-<span class="title">title</span>&quot;&gt;申请交换友链&lt;/<span class="title">h3</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">form</span> <span class="title">id</span>=&quot;<span class="title">link</span>-<span class="title">form</span>&quot; <span class="title">class</span>=&quot;<span class="title">modal</span>-<span class="title">form</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">text</span>&quot;   <span class="title">name</span>=&quot;<span class="title">link_name</span>&quot;        <span class="title">placeholder</span>=&quot;网站名称 *&quot; <span class="title">required</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">url</span>&quot;    <span class="title">name</span>=&quot;<span class="title">link_url</span>&quot;         <span class="title">placeholder</span>=&quot;网站地址 *&quot; <span class="title">required</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">email</span>&quot;  <span class="title">name</span>=&quot;<span class="title">link_owner_email</span>&quot; <span class="title">placeholder</span>=&quot;站长邮箱 *&quot; <span class="title">required</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">url</span>&quot;    <span class="title">name</span>=&quot;<span class="title">link_image</span>&quot;       <span class="title">placeholder</span>=&quot;头像 / <span class="title">Logo</span> *&quot; <span class="title">required</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">textarea</span> <span class="title">name</span>=&quot;<span class="title">link_description</span>&quot; <span class="title">rows</span>=&quot;3&quot; <span class="title">placeholder</span>=&quot;一句话描述 *&quot; <span class="title">required</span>&gt;&lt;/<span class="title">textarea</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">button</span> <span class="title">type</span>=&quot;<span class="title">submit</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span>-<span class="title">submit</span>&quot;&gt;提交申请&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">p</span> <span class="title">id</span>=&quot;<span class="title">form</span>-<span class="title">msg</span>&quot; <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">msg</span>&quot;&gt;&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;!-- 载入独立脚本 --&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">  <span class="title">var</span> <span class="title">ajax_comment_obj</span> = &lt;?<span class="title">php</span> <span class="title">echo</span> <span class="title">wp_json_encode</span>(<span class="title">array</span>(&#x27;<span class="title">ajax_url</span>&#x27; =&gt; <span class="title">admin_url</span>(&#x27;<span class="title">admin</span>-<span class="title">ajax</span>.<span class="title">php</span>&#x27;))); ?&gt;;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">script</span> <span class="title">src</span>=&quot;&lt;?<span class="title">php</span> <span class="title">echo</span> <span class="title">get_template_directory_uri</span>(); ?&gt;/<span class="title">self</span>-<span class="title">innovate</span>/<span class="title">page</span>-<span class="title">links</span>.<span class="title">js</span>&quot; <span class="title">defer</span>&gt;&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> <span class="title">get_footer</span>(); ?&gt;</span></span><br></pre></td></tr></table></figure><p>下面是核心代码的css样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  * page-links.css</span></span><br><span class="line"><span class="comment"> *   * 版本：1.0.0</span></span><br><span class="line"><span class="comment"> *    * 描述：友情链接页面专用样式</span></span><br><span class="line"><span class="comment"> *     * 作者：Eucalyptus</span></span><br><span class="line"><span class="comment"> *      * 创建日期：2025-08-30</span></span><br><span class="line"><span class="comment"> *       * 修改记录：</span></span><br><span class="line"><span class="comment"> *        *   - 2025-08-30：首版，含友链卡片、搜索、弹窗</span></span><br><span class="line"><span class="comment"> *         */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ========= 1. 页面通用 ========= */</span></span><br><span class="line"><span class="selector-class">.page-links</span>&#123;</span><br><span class="line">  <span class="attribute">max-width</span>:<span class="number">960px</span>;</span><br><span class="line">  <span class="attribute">margin</span>:<span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">40px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>:-apple-system,BlinkMacSystemFont,<span class="string">&quot;Segoe UI&quot;</span>,Roboto,<span class="string">&quot;Helvetica Neue&quot;</span>,Arial,<span class="string">&quot;Noto Sans&quot;</span>,sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ============ 顶部标题（跟随深浅 + 移动端适配） ============ */</span></span><br><span class="line"><span class="comment">/* 友情链接横幅 */</span></span><br><span class="line"><span class="selector-class">.hero-title</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">3.5rem</span> <span class="number">1.5rem</span> <span class="number">2.5rem</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">1.5rem</span> <span class="number">1.5rem</span>;</span><br><span class="line">  <span class="attribute">text-align</span>:center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hero-title</span> <span class="selector-tag">h1</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">2.2rem</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>:<span class="number">700</span>;</span><br><span class="line">  <span class="attribute">letter-spacing</span>:.<span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">position</span>:relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hero-title</span> <span class="selector-tag">h1</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>:<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">display</span>:block;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">background</span>:<span class="number">#667eea</span>;</span><br><span class="line">  <span class="attribute">margin</span>:<span class="number">8px</span> auto <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hero-sub</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#666</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>:.<span class="number">75rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ========= 玻璃态卡片 3.0 ========= */</span></span><br><span class="line"><span class="selector-class">.links</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>:<span class="built_in">repeat</span>(<span class="number">3</span>, <span class="number">1</span>fr); <span class="comment">/* 固定 3 列 */</span></span><br><span class="line">  <span class="attribute">gap</span>:<span class="number">24px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.link-card</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>:relative;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background</span>:transparent;                <span class="comment">/* 跟随深浅 */</span></span><br><span class="line">  <span class="attribute">border</span>:<span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="built_in">var</span>(--color-border,<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>),.<span class="number">1</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>:<span class="number">0</span> <span class="number">8px</span> <span class="number">32px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">08</span>);  <span class="comment">/* 深浅通用阴影 */</span></span><br><span class="line">  <span class="attribute">transition</span>:.<span class="number">4s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">175</span>,.<span class="number">885</span>,.<span class="number">32</span>,<span class="number">1.275</span>);</span><br><span class="line">  <span class="attribute">overflow</span>:hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:root</span>&#123;</span><br><span class="line">  <span class="attr">--color-border</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;       <span class="comment">/* 深色模式 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span>&#123;</span><br><span class="line">  <span class="attr">--color-border</span>: <span class="number">255</span> <span class="number">255</span> <span class="number">255</span>; <span class="comment">/* 浅色模式 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.link-card</span><span class="selector-pseudo">::before</span>&#123;                               <span class="comment">/* 光泽渐变 */</span></span><br><span class="line">  <span class="attribute">content</span>:<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>:absolute;</span><br><span class="line">  <span class="attribute">inset</span>:<span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background</span>:<span class="built_in">linear-gradient</span>(<span class="number">135deg</span>,transparent <span class="number">40%</span>,<span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,.<span class="number">3</span>));</span><br><span class="line">  <span class="attribute">pointer-events</span>:none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.link-card</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">  <span class="attribute">transform</span>:<span class="built_in">translateY</span>(-<span class="number">6px</span>) <span class="built_in">scale</span>(<span class="number">1.02</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>:<span class="number">0</span> <span class="number">12px</span> <span class="number">48px</span> <span class="built_in">rgba</span>(<span class="number">102</span>,<span class="number">126</span>,<span class="number">234</span>,.<span class="number">25</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 头像 */</span></span><br><span class="line"><span class="selector-class">.link-card</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">64px</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">64px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">border</span>:<span class="number">2px</span> solid <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>:<span class="number">0</span> <span class="number">4px</span> <span class="number">12px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">08</span>);</span><br><span class="line">  <span class="attribute">object-fit</span>:cover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文字区 */</span></span><br><span class="line"><span class="selector-class">.link-card</span> <span class="selector-class">.info</span>&#123;</span><br><span class="line">  <span class="attribute">margin-left</span>:<span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.link-card</span> <span class="selector-class">.name</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>:<span class="number">700</span>;</span><br><span class="line">  <span class="attribute">letter-spacing</span>:.<span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>:<span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.link-card</span> <span class="selector-class">.desc</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#555</span>;</span><br><span class="line">  <span class="attribute">line-height</span>:<span class="number">1.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 右上角角标（纯 CSS） */</span></span><br><span class="line"><span class="selector-class">.link-card</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;           <span class="comment">/* 为伪元素定位 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.link-card</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;友链&quot;</span>;              <span class="comment">/* 角标文字 */</span></span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">11px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">135deg</span>,<span class="number">#ea66d4</span>,<span class="number">#ac5196</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: opacity .<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;         <span class="comment">/* 不影响点击 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.link-card</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ===== 分类标题 3.0 ===== */</span></span><br><span class="line"><span class="selector-class">.link-cat</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>:relative;</span><br><span class="line">  <span class="attribute">margin-bottom</span>:<span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.link-cat</span> <span class="selector-tag">h2</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:inline-flex;</span><br><span class="line">  <span class="attribute">align-items</span>:center;</span><br><span class="line">  <span class="attribute">gap</span>:<span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">8px</span> <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>:<span class="number">700</span>;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background</span>:<span class="built_in">linear-gradient</span>(<span class="number">135deg</span>,<span class="number">#667eea</span>,<span class="number">#764ba2</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>:<span class="number">0</span> <span class="number">4px</span> <span class="number">12px</span> <span class="built_in">rgba</span>(<span class="number">102</span>,<span class="number">126</span>,<span class="number">234</span>,.<span class="number">25</span>);</span><br><span class="line">  <span class="attribute">letter-spacing</span>:.<span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 分类描述 */</span></span><br><span class="line"><span class="selector-class">.link-cat-desc</span>&#123;</span><br><span class="line">  <span class="attribute">margin</span>: -<span class="number">8px</span> <span class="number">0</span> <span class="number">24px</span> <span class="number">18px</span>;   <span class="comment">/* 负值贴紧标题，左侧与标题文字对齐 */</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.9rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: .<span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">540px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ========= 移动端适配 ========= */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.links</span> &#123;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr; <span class="comment">/* 1 列 */</span></span><br><span class="line">    <span class="attribute">gap</span>: <span class="number">20px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.link-card</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">16px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.link-card</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">48px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.link-card</span> <span class="selector-class">.name</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.link-card</span> <span class="selector-class">.desc</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ========= 4. 搜索框 ========= */</span></span><br><span class="line"><span class="selector-class">.link-search</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:flex;</span><br><span class="line">  <span class="attribute">margin-bottom</span>:<span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.link-search</span> <span class="selector-tag">input</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">max-width</span>:<span class="number">320px</span>;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">12px</span> <span class="number">40px</span> <span class="number">12px</span> <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">background</span>:<span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border</span>:<span class="number">2px</span> solid transparent;</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>:<span class="number">0</span> <span class="number">4px</span> <span class="number">12px</span> <span class="built_in">rgba</span>(<span class="number">102</span>,<span class="number">126</span>,<span class="number">234</span>,.<span class="number">15</span>);</span><br><span class="line">  <span class="attribute">transition</span>:border-color .<span class="number">3s</span>, box-shadow .<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">outline</span>:none;</span><br><span class="line">  <span class="attribute">background-image</span>:<span class="built_in">url</span>(<span class="string">&#x27;data:image/svg+xml;utf8,&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;20&quot; height=&quot;20&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;none&quot; stroke=&quot;%23667eea&quot; stroke-width=&quot;2&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot;&gt;&lt;circle cx=&quot;11&quot; cy=&quot;11&quot; r=&quot;8&quot;&gt;&lt;/circle&gt;&lt;line x1=&quot;21&quot; y1=&quot;21&quot; x2=&quot;16.65&quot; y2=&quot;16.65&quot;&gt;&lt;/line&gt;&lt;/svg&gt;&#x27;</span>);</span><br><span class="line">  <span class="attribute">background-repeat</span>:no-repeat;</span><br><span class="line">  <span class="attribute">background-position</span><span class="selector-pseudo">:right</span> <span class="number">14px</span> center;</span><br><span class="line">  <span class="attribute">background-size</span>:<span class="number">20px</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 悬浮/聚焦高亮 */</span></span><br><span class="line"><span class="selector-class">.link-search</span> <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span>&#123;</span><br><span class="line">  <span class="attribute">border-color</span>:<span class="number">#667eea</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">102</span>,<span class="number">126</span>,<span class="number">234</span>,.<span class="number">25</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* placeholder 样式 */</span></span><br><span class="line"><span class="selector-class">.link-search</span> <span class="selector-tag">input</span><span class="selector-pseudo">::placeholder</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#7f8c8d</span>;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ========= 5. 按钮 &amp; 弹窗 ========= */</span></span><br><span class="line"><span class="comment">/* 5.1 触发按钮居中容器 */</span></span><br><span class="line"><span class="selector-class">.btn-center</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:flex;</span><br><span class="line">  <span class="attribute">justify-content</span>:center;</span><br><span class="line">  <span class="attribute">margin</span>:<span class="number">30px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 5.2 主按钮样式 */</span></span><br><span class="line"><span class="selector-class">.btn-hero</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>:relative;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">12px</span> <span class="number">32px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>:<span class="number">600</span>;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background</span>:<span class="built_in">linear-gradient</span>(<span class="number">135deg</span>,<span class="number">#667eea</span> <span class="number">0%</span>, <span class="number">#764ba2</span> <span class="number">100%</span>);</span><br><span class="line">  <span class="attribute">border</span>:none;</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>:pointer;</span><br><span class="line">  <span class="attribute">box-shadow</span>:<span class="number">0</span> <span class="number">6px</span> <span class="number">20px</span> <span class="built_in">rgba</span>(<span class="number">102</span>,<span class="number">126</span>,<span class="number">234</span>,.<span class="number">4</span>);</span><br><span class="line">  <span class="attribute">transition</span>:all .<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">overflow</span>:hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-hero</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">  <span class="attribute">transform</span>:<span class="built_in">translateY</span>(-<span class="number">3px</span>) <span class="built_in">scale</span>(<span class="number">1.03</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>:<span class="number">0</span> <span class="number">10px</span> <span class="number">30px</span> <span class="built_in">rgba</span>(<span class="number">102</span>,<span class="number">126</span>,<span class="number">234</span>,.<span class="number">55</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 5.3 弹窗遮罩 */</span></span><br><span class="line"><span class="selector-class">.modal-fade</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>:fixed;</span><br><span class="line">  <span class="attribute">inset</span>:<span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>:flex;</span><br><span class="line">  <span class="attribute">align-items</span>:center;</span><br><span class="line">  <span class="attribute">justify-content</span>:center;</span><br><span class="line">  <span class="attribute">background</span>:<span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">55</span>);</span><br><span class="line">  <span class="attribute">backdrop-filter</span>:<span class="built_in">blur</span>(<span class="number">4px</span>);</span><br><span class="line">  <span class="attribute">opacity</span>:<span class="number">0</span>;</span><br><span class="line">  <span class="attribute">visibility</span>:hidden;</span><br><span class="line">  <span class="attribute">transition</span>:.<span class="number">35s</span>;</span><br><span class="line">  <span class="attribute">z-index</span>:<span class="number">9999</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.modal-fade</span><span class="selector-class">.show</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>:<span class="number">1</span>;</span><br><span class="line">  <span class="attribute">visibility</span>:visible;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 5.4 弹窗主体 */</span></span><br><span class="line"><span class="selector-class">.modal-dialog</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">92%</span>;</span><br><span class="line">  <span class="attribute">max-width</span>:<span class="number">420px</span>;</span><br><span class="line">  <span class="attribute">background</span>:<span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">32px</span> <span class="number">36px</span> <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">position</span>:relative;</span><br><span class="line">  <span class="attribute">transform</span>:<span class="built_in">translateY</span>(-<span class="number">30px</span>) <span class="built_in">scale</span>(.<span class="number">95</span>);</span><br><span class="line">  <span class="attribute">transition</span>:transform .<span class="number">35s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.modal-fade</span><span class="selector-class">.show</span> <span class="selector-class">.modal-dialog</span>&#123;</span><br><span class="line">  <span class="attribute">transform</span>:none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 5.5 关闭按钮 */</span></span><br><span class="line"><span class="selector-class">.modal-close</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>:absolute;</span><br><span class="line">  <span class="attribute">top</span>:<span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">right</span>:<span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">26px</span>;</span><br><span class="line">  <span class="attribute">background</span>:none;</span><br><span class="line">  <span class="attribute">border</span>:none;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#999</span>;</span><br><span class="line">  <span class="attribute">cursor</span>:pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 5.6 表单元素 */</span></span><br><span class="line"><span class="selector-class">.modal-form</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>:column;</span><br><span class="line">  <span class="attribute">gap</span>:<span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.modal-form</span> <span class="selector-tag">input</span>,</span><br><span class="line"><span class="selector-class">.modal-form</span> <span class="selector-tag">textarea</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">12px</span> <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#e1e5e9</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-submit</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>:<span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border</span>:none;</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">background</span>:<span class="built_in">linear-gradient</span>(<span class="number">135deg</span>,<span class="number">#667eea</span> <span class="number">0%</span>,<span class="number">#764ba2</span> <span class="number">100%</span>);</span><br><span class="line">  <span class="attribute">cursor</span>:pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 移动端补丁，溢出锁死 */</span></span><br><span class="line"><span class="selector-class">.page-links</span>&#123;</span><br><span class="line">  <span class="attribute">overflow-x</span>: hidden;   <span class="comment">/* 关键：禁止横向滚动 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以下是JavaScript代码，主要用来实现前端友链页面的实时搜索功能、友链提交弹窗（使用模态框组件展示表单，包含必填字段验证和样式反馈）以及后端提交申请内容到后端的功能</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ========= 实时搜索 ========= */</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;link-search&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> kw = <span class="variable language_">this</span>.<span class="property">value</span>.<span class="title function_">toLowerCase</span>();</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.link-card&#x27;</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">card</span> =&gt;</span> &#123;</span><br><span class="line">    card.<span class="property">style</span>.<span class="property">display</span> = card.<span class="property">textContent</span>.<span class="title function_">toLowerCase</span>().<span class="title function_">includes</span>(kw) ? <span class="string">&#x27;flex&#x27;</span> : <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ========= 弹窗控制 ========= */</span></span><br><span class="line"><span class="keyword">const</span> overlay = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;link-modal-overlay&#x27;</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;open-link-modal&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> overlay.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;show&#x27;</span>));</span><br><span class="line">overlay.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (e.<span class="property">target</span> === overlay || e.<span class="property">target</span>.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;modal-close&#x27;</span>)) overlay.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;show&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ========= Ajax 提交友链 ========= */</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;link-form&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;submit&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">  e.<span class="title function_">preventDefault</span>();</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">new</span> <span class="title class_">FormData</span>(<span class="variable language_">this</span>);</span><br><span class="line">  data.<span class="title function_">append</span>(<span class="string">&#x27;action&#x27;</span>, <span class="string">&#x27;submit_link_apply&#x27;</span>);</span><br><span class="line">  <span class="title function_">fetch</span>(ajax_comment_obj.<span class="property">ajax_url</span>, &#123; <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>, <span class="attr">body</span>: data &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">r</span> =&gt;</span> r.<span class="title function_">json</span>())</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;form-msg&#x27;</span>).<span class="property">textContent</span> = res.<span class="property">data</span>;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">success</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">reset</span>();</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> overlay.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;show&#x27;</span>), <span class="number">1500</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>最后是后端处理前端请求并为link_manager新增待审核列的代码，审核逻辑基于链接是否在前端隐藏， 关闭私密功能即可前端展示</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Meteor%E4%B8%BB%E9%A2%98%E5%8F%8B%E9%93%BE%E9%A1%B5%E9%9D%A2%E8%87%AA%E7%A0%94/1.png"></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Meteor%E4%B8%BB%E9%A2%98%E5%8F%8B%E9%93%BE%E9%A1%B5%E9%9D%A2%E8%87%AA%E7%A0%94/2.png"></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 待审核友链提示</span></span><br><span class="line"><span class="comment"> * 包含：后台列表新增“待审核”列 + 红色气泡菜单提示 + Ajax 接收</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* --------------------------------------------------</span></span><br><span class="line"><span class="comment"> * 1. 后台列表新增“待审核”列，纯文本，系统默认样式</span></span><br><span class="line"><span class="comment"> * -------------------------------------------------- */</span></span><br><span class="line"><span class="comment">/* 新增“待审核”列（键名 review） */</span></span><br><span class="line"><span class="title function_ invoke__">add_filter</span>( <span class="string">&#x27;manage_link-manager_columns&#x27;</span>, function ( <span class="variable">$cols</span> ) &#123;</span><br><span class="line">    <span class="variable">$cols</span>[<span class="string">&#x27;review&#x27;</span>] = <span class="string">&#x27;待审核&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$cols</span>;</span><br><span class="line">&#125; );</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 单元格输出红色气泡 */</span></span><br><span class="line"><span class="title function_ invoke__">add_action</span>( <span class="string">&#x27;manage_link_custom_column&#x27;</span>, function ( <span class="variable">$col</span>, <span class="variable">$link_id</span> ) &#123;</span><br><span class="line">    <span class="keyword">if</span> ( <span class="variable">$col</span> === <span class="string">&#x27;review&#x27;</span> ) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">get_bookmark_field</span>( <span class="string">&#x27;link_visible&#x27;</span>, <span class="variable">$link_id</span> ) === <span class="string">&#x27;N&#x27;</span></span><br><span class="line">            ? <span class="string">&#x27;&lt;span style=&quot;display:inline-block;background:#e60026;color:#fff;font-size:11px;padding:2px 6px;border-radius:10px;margin-left:4px;&quot;&gt;待审&lt;/span&gt;&#x27;</span></span><br><span class="line">            : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="number">10</span>, <span class="number">2</span> );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* --------------------------------------------------</span></span><br><span class="line"><span class="comment"> * 2. 后台“链接”菜单右上角红色数字气泡</span></span><br><span class="line"><span class="comment"> * -------------------------------------------------- */</span></span><br><span class="line"><span class="title function_ invoke__">add_action</span>( <span class="string">&#x27;admin_menu&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="variable">$count</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">foreach</span> ( <span class="title function_ invoke__">get_bookmarks</span>( [ <span class="string">&#x27;hide_invisible&#x27;</span> =&gt; <span class="number">0</span> ] ) <span class="keyword">as</span> <span class="variable">$link</span> ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( <span class="variable">$link</span>-&gt;link_visible === <span class="string">&#x27;N&#x27;</span> ) <span class="variable">$count</span>++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ( <span class="variable">$count</span> ) &#123;</span><br><span class="line">        <span class="keyword">global</span> <span class="variable">$menu</span>;</span><br><span class="line">        <span class="keyword">foreach</span> ( <span class="variable">$menu</span> <span class="keyword">as</span> &amp;<span class="variable">$item</span> ) &#123;</span><br><span class="line">            <span class="keyword">if</span> ( <span class="variable">$item</span>[<span class="number">2</span>] === <span class="string">&#x27;link-manager.php&#x27;</span> ) &#123;</span><br><span class="line">                <span class="variable">$item</span>[<span class="number">0</span>] .= <span class="string">&#x27; &lt;span class=&quot;awaiting-mod&quot;&gt;&lt;span class=&quot;pending-count&quot;&gt;&#x27;</span> . <span class="variable">$count</span> . <span class="string">&#x27;&lt;/span&gt;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; );</span><br><span class="line"></span><br><span class="line"><span class="comment">/* --------------------------------------------------</span></span><br><span class="line"><span class="comment"> * 3. Ajax 接收端（无邮件）</span></span><br><span class="line"><span class="comment"> * -------------------------------------------------- */</span></span><br><span class="line"><span class="title function_ invoke__">add_action</span>( <span class="string">&#x27;wp_ajax_nopriv_submit_link_apply&#x27;</span>, <span class="string">&#x27;handle_link_apply&#x27;</span> );</span><br><span class="line"><span class="title function_ invoke__">add_action</span>( <span class="string">&#x27;wp_ajax_submit_link_apply&#x27;</span>,        <span class="string">&#x27;handle_link_apply&#x27;</span> );</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handle_link_apply</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$name</span>  = <span class="title function_ invoke__">sanitize_text_field</span>( <span class="variable">$_POST</span>[<span class="string">&#x27;link_name&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span> );</span><br><span class="line">    <span class="variable">$url</span>   = <span class="title function_ invoke__">esc_url_raw</span>        ( <span class="variable">$_POST</span>[<span class="string">&#x27;link_url&#x27;</span>]  ?? <span class="string">&#x27;&#x27;</span> );</span><br><span class="line">    <span class="variable">$email</span> = <span class="title function_ invoke__">sanitize_email</span>      ( <span class="variable">$_POST</span>[<span class="string">&#x27;link_owner_email&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span> );</span><br><span class="line">    <span class="variable">$desc</span>  = <span class="title function_ invoke__">sanitize_text_field</span>( <span class="variable">$_POST</span>[<span class="string">&#x27;link_description&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span> );</span><br><span class="line">    <span class="variable">$img</span>   = <span class="title function_ invoke__">esc_url_raw</span>        ( <span class="variable">$_POST</span>[<span class="string">&#x27;link_image&#x27;</span>]       ?? <span class="string">&#x27;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( <span class="keyword">empty</span>( <span class="variable">$name</span> ) || <span class="keyword">empty</span>( <span class="variable">$url</span> ) || ! <span class="title function_ invoke__">is_email</span>( <span class="variable">$email</span> ) ) &#123;</span><br><span class="line">        <span class="title function_ invoke__">wp_send_json_error</span>( <span class="string">&#x27;请完整填写必填项&#x27;</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">wp_insert_link</span>( [</span><br><span class="line">        <span class="string">&#x27;link_name&#x27;</span>        =&gt; <span class="variable">$name</span>,</span><br><span class="line">        <span class="string">&#x27;link_url&#x27;</span>         =&gt; <span class="variable">$url</span>,</span><br><span class="line">        <span class="string">&#x27;link_description&#x27;</span> =&gt; <span class="variable">$desc</span>,</span><br><span class="line">        <span class="string">&#x27;link_image&#x27;</span>       =&gt; <span class="variable">$img</span>,</span><br><span class="line">        <span class="string">&#x27;link_owner_email&#x27;</span> =&gt; <span class="variable">$email</span>,</span><br><span class="line">        <span class="string">&#x27;link_visible&#x27;</span>     =&gt; <span class="string">&#x27;N&#x27;</span>,</span><br><span class="line">    ] );</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">wp_send_json_success</span>( <span class="string">&#x27;已收到申请，审核后显示，感谢！&#x27;</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上传代码至Meteor主题目录完成部署，最后在functions.php中启用link_manager并调用pending-links.php处理后台任务。</p><p>WordPress的functions.php文件中添加指定代码可实现特定功能，需注意代码正确性和备份以防出错。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 开启后台链接 */</span></span><br><span class="line"><span class="title function_ invoke__">add_filter</span>( <span class="string">&#x27;pre_option_link_manager_enabled&#x27;</span>, <span class="string">&#x27;__return_true&#x27;</span> );</span><br><span class="line"></span><br><span class="line"> <span class="comment">/* 后台新增友链提示功能 */</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="title function_ invoke__">get_theme_file_path</span>( <span class="string">&#x27;/self-innovate/pending-links.php&#x27;</span> );</span><br></pre></td></tr></table></figure><blockquote><p>展示地址：<a href="https://blog.mingliang.net.cn/%e5%8f%8b%e9%93%be/">https://blog.mingliang.net.cn/%e5%8f%8b%e9%93%be/</a></p></blockquote></div>]]></content>
      
      
      <categories>
          
          <category> 技术分享 </category>
          
          <category> Wordpress </category>
          
          <category> Meteor </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Wordpress </tag>
            
            <tag> 技术分享 </tag>
            
            <tag> Meteor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WPCode添加代码启用后网站报错怎么处理</title>
      <link href="/2025/05/31/WPcode%E6%8A%A5%E9%94%99%E5%A4%84%E7%90%86/"/>
      <url>/2025/05/31/WPcode%E6%8A%A5%E9%94%99%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><p>有时候我们使用WPCode插件添加的代码可能会出现问题，或者与其他代码产生冲突，这就可能导致网站出现报错的情况。</p><!-- 这是一张图片，ocr 内容为： --><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/WPCode%E6%8A%A5%E9%94%99/4.png"></p><p>这种时候通常可以采取两种不同的应对方式：</p><h2 id="一、修改文件"><a href="#一、修改文件" class="headerlink" title="一、修改文件"></a>一、修改文件</h2><p>如果在添加代码后网站出现报错，可以尝试通过登录后台服务器或者使用FTP删除或重命名 WPCode 插件的文件夹，这个文件夹的名称通常是 “insert-headers-and-footers”，操作前建议先备份相关数据，以确保网站的安全。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#重命名</span></span><br><span class="line"> <span class="built_in">mv</span> insert-headers-and-footers insert-headers-and-footers-mv</span><br></pre></td></tr></table></figure><!-- 这是一张图片，ocr 内容为： --><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/WPCode%E6%8A%A5%E9%94%99/5.png"></p><p>其实不建议使用这种方法，如果你是把代码添加到了functions.php文件中，可以直接编辑并删除。但这种情况涉及的是插件，使用的是WPCode插件，一旦你重新启用它，之前添加的代码又会被载入并保持开启状态，这样一来，你网站上的报错问题还会再次出现。</p><h2 id="二、进入WPCode插件的安全模式"><a href="#二、进入WPCode插件的安全模式" class="headerlink" title="二、进入WPCode插件的安全模式"></a>二、进入WPCode插件的安全模式</h2><p>在网站域名后面加上 <code>/wp-admin/?wpcode-safe-mode=1</code> 即可进入安全模式，例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://mingliang.net.cn//wp-admin/?wpcode-safe-mode=1</span><br></pre></td></tr></table></figure><p>进入安全模式后可以看到网站将不再执行 WPCode 插件所添加的任何代码。</p><!-- 这是一张图片，ocr 内容为： --><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/WPCode%E6%8A%A5%E9%94%99/9.png"></p><p>这时你可以在后台的WPCode插件中找到刚刚添加并导致错误的代码片段，直接删除或禁用，以恢复正常运行。</p><!-- 这是一张图片，ocr 内容为： --><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/WPCode%E6%8A%A5%E9%94%99/7.png"></p></div>]]></content>
      
      
      <categories>
          
          <category> 技术分享 </category>
          
          <category> Wordpress </category>
          
          <category> 插件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Wordpress </tag>
            
            <tag> 技术分享 </tag>
            
            <tag> 插件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WordPress通过简码插入bilibili视频</title>
      <link href="/2025/03/25/BILIBILI%E7%AE%80%E7%A0%81/"/>
      <url>/2025/03/25/BILIBILI%E7%AE%80%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>B站是国内非常受欢迎的视频分享平台，上面不仅内容丰富，而且很多视频制作精良、趣味十足。很多人，比如我，就喜欢将B站的视频通过 iframe 嵌入到自己的网页中，但这段代码又长又复杂，字符长度大约有230个，每次使用都很麻烦。为了让大家更方便地在 WordPress 网站中插入B站视频，我准备了一个简单实用的短代码教程，轻松几步就能搞定。</p><h2 id="二、代码"><a href="#二、代码" class="headerlink" title="二、代码"></a>二、代码</h2><p>将以下代码复制到网站主题的 functions.php 文件末尾即可完成添加。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 添加插入Bilibili视频的短代码</span><br><span class="line"> *</span><br><span class="line"> * @param array <span class="variable">$atts</span> 短代码属性数组</span><br><span class="line"> * @param string|null <span class="variable">$content</span> 短代码内容（未使用）</span><br><span class="line"> * @<span class="built_in">return</span> string 返回生成的HTML代码</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">function</span> vbilibili_shortcode( <span class="variable">$atts</span>, <span class="variable">$content</span> = null ) &#123;</span><br><span class="line">    // 默认参数值</span><br><span class="line">    <span class="variable">$defaults</span> = array(</span><br><span class="line">        <span class="string">&#x27;av&#x27;</span> =&gt; <span class="string">&#x27;&#x27;</span>,    // Bilibili视频的AV号</span><br><span class="line">        <span class="string">&#x27;bv&#x27;</span> =&gt; <span class="string">&#x27;&#x27;</span>,    // Bilibili视频的BV号</span><br><span class="line">        <span class="string">&#x27;w&#x27;</span>  =&gt; <span class="string">&#x27;100%&#x27;</span>, // 默认宽度为100%</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    // 解析短代码中的参数</span><br><span class="line">    <span class="variable">$atts</span> = shortcode_atts( <span class="variable">$defaults</span>, <span class="variable">$atts</span> );</span><br><span class="line">    </span><br><span class="line">    // 如果参数 av 和 bv 都为空，则返回错误信息</span><br><span class="line">    <span class="keyword">if</span> ( empty( <span class="variable">$atts</span>[<span class="string">&#x27;av&#x27;</span>] ) &amp;&amp; empty( <span class="variable">$atts</span>[<span class="string">&#x27;bv&#x27;</span>] ) ) &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="string">&#x27;&lt;p&gt;av 和 bv 不可为空&lt;/p&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 如果参数 av 和 bv 同时存在，则返回错误信息</span><br><span class="line">    <span class="keyword">if</span> ( ! empty( <span class="variable">$atts</span>[<span class="string">&#x27;av&#x27;</span>] ) &amp;&amp; ! empty( <span class="variable">$atts</span>[<span class="string">&#x27;bv&#x27;</span>] ) ) &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="string">&#x27;&lt;p&gt;av 和 bv 不可同时存在&lt;/p&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 根据参数 av 或 bv 构建 iframe 的 URL</span><br><span class="line">    <span class="keyword">if</span> ( ! empty( <span class="variable">$atts</span>[<span class="string">&#x27;av&#x27;</span>] ) ) &#123;</span><br><span class="line">        <span class="variable">$iframe_url</span> = <span class="string">&#x27;https://player.bilibili.com/player.html?aid=&#x27;</span> . esc_attr( <span class="variable">$atts</span>[<span class="string">&#x27;av&#x27;</span>] ) . <span class="string">&#x27;&amp;high_quality=1&#x27;</span>;</span><br><span class="line">    &#125; elseif ( ! empty( <span class="variable">$atts</span>[<span class="string">&#x27;bv&#x27;</span>] ) ) &#123;</span><br><span class="line">        <span class="variable">$iframe_url</span> = <span class="string">&#x27;https://player.bilibili.com/player.html?bvid=&#x27;</span> . esc_attr( <span class="variable">$atts</span>[<span class="string">&#x27;bv&#x27;</span>] ) . <span class="string">&#x27;&amp;high_quality=1&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 构建 iframe 的 HTML 代码，并直接应用内联样式</span><br><span class="line">    <span class="variable">$iframe</span> = <span class="string">&#x27;&lt;div style=&quot;position:relative; padding-bottom:56.25%; height:0; overflow:hidden; margin:0 auto;&quot;&gt;&lt;iframe src=&quot;&#x27;</span> . <span class="variable">$iframe_url</span> . <span class="string">&#x27;&quot; style=&quot;position:absolute; top:0; left:0; width:100%; height:100%;&quot; frameborder=&quot;no&quot; scrolling=&quot;no&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    // 返回 iframe 的 HTML 代码</span><br><span class="line">    <span class="built_in">return</span> <span class="variable">$iframe</span>;</span><br><span class="line">&#125;</span><br><span class="line">add_shortcode( <span class="string">&#x27;vbilibili&#x27;</span>, <span class="string">&#x27;vbilibili_shortcode&#x27;</span> );</span><br></pre></td></tr></table></figure><p>将内容嵌入到<code>&lt;iframe&gt;</code>中，并通过设置相关属性来限制<code>&lt;iframe&gt;</code> 内的页面无法在新窗口或新标签页中打开，从而防止跳转到 B 站。可以通过在 <code>&lt;iframe&gt;</code> 标签中添加 sandbox 属性，结合 allow 属性精确控制权限，确保用户在当前页面内浏览，不被引导至其他网站。这种方式有助于提升用户体验的连续性，同时防止意外跳转带来的干扰。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sandbox=<span class="string">&quot;allow-top-navigation allow-same-origin allow-forms allow-scripts&quot;</span></span><br></pre></td></tr></table></figure><h2 id="三、WPCode"><a href="#三、WPCode" class="headerlink" title="三、WPCode"></a>三、WPCode</h2><p>如果你使用的是一个经常更新的主题，每次更新后都需要将代码添加到 functions.php 文件中，这显然十分麻烦。为了解决这个问题，你可以使用 WPCode 插件，在不修改主题文件的情况下，轻松实现自定义代码片段的添加和管理。</p><h3 id="3-1、WPCode介绍"><a href="#3-1、WPCode介绍" class="headerlink" title="3.1、WPCode介绍"></a>3.1、WPCode介绍</h3><p>WPCode 是一款流行的WordPress插件，它允许用户在不修改主题文件的情况下，向WordPress网站添加自定义代码片段。这款插件非常适合需要在网站中添加额外功能的站长，例如，添加Google分析或百度统计的代码，或者插入自定义CSS、JavaScript等。</p><p>WPCode插件还提供了一个代码片段库，您可以在这个库里面找到经过验证的PHP代码片段，例如：禁用REST API、禁用 XML-RPC、禁用注释、允许 SVG 文件上传、禁用 Gutenberg、添加经典编辑器等，而无需为每个请求安装单独的插件。使用这个插件，还可以控制代码的激活状态，如果需要在调试情况下先不适用某个功能，可以先不激活，而不是直接删除。</p><p>总之非常方便，如果您的网站也是WordPress网站，那么站长建议您可以安装下这个插件试一试。</p><h3 id="3-2、自定义代码到WPCode"><a href="#3-2、自定义代码到WPCode" class="headerlink" title="3.2、自定义代码到WPCode"></a>3.2、自定义代码到WPCode</h3><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/bilibili%E7%AE%80%E7%A0%81/1.png"></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/bilibili%E7%AE%80%E7%A0%81/2.png"></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/bilibili%E7%AE%80%E7%A0%81/2.png"></p><h3 id="3-3、使用简码"><a href="#3-3、使用简码" class="headerlink" title="3.3、使用简码"></a>3.3、使用简码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[vbilibili 参数名=<span class="string">&quot;参数值&quot;</span>][/vbilibili]</span><br></pre></td></tr></table></figure><p>参数：</p><table><thead><tr><th>参数名</th><th>可选值</th><th>默认值</th><th>解释</th><th>是否必须</th></tr></thead><tbody><tr><td>av</td><td>–</td><td>–</td><td>Bilibili 视频的 AV 号</td><td>是</td></tr><tr><td>bv</td><td>–</td><td>–</td><td>Bilibili 视频的 BV 号</td><td>是</td></tr></tbody></table><p>示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[vbilibili bv=BV1SoZ5YVEJg][/vbilibili]</span><br></pre></td></tr></table></figure><div style="position: relative; width: 100%; height: 0; padding-bottom: 56.25%;">  <iframe     src="https://player.bilibili.com/player.html?bvid=BV1SoZ5YVEJg&page=1&high_quality=1&as_wide=1&allowfullscreen=true&autoplay=0"     style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"     frameborder="0"     scrolling="no"     allowfullscreen>  </iframe></div><p>注意：  </p><ul><li>Bilibili 视频的 AV 号或 BV 号是必须的，但只要输入 AV 号或 BV 号的其中一个即可。  </li><li>Bilibili 视频的 AV 号不要带上 av</li></ul></div>]]></content>
      
      
      <categories>
          
          <category> 技术分享 </category>
          
          <category> Wordpress </category>
          
          <category> 简码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Wordpress </tag>
            
            <tag> 技术分享 </tag>
            
            <tag> 简码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Wordpress登录页面插件</title>
      <link href="/2025/01/03/%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2%E6%8F%92%E4%BB%B6/"/>
      <url>/2025/01/03/%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2%E6%8F%92%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p><code>LoginPress | wp-login Custom Login Page Customizer</code> 是一款WordPress插件，它提供了丰富的自定义字段来改变WordPress登录页面的布局。使用该插件，您可以完全修改登录页面的外观和感觉，包括登录错误消息、忘记密码错误消息、注册错误消息、忘记密码提示消息等。LoginPress 插件使用 Customizer API 构建，允许您实时预览登录页面的更改。该插件非常易于使用，不需要任何编码技能，只需为登录表单的每个元素设置选项，就可以在几秒钟内创建一个新的自定义登录页面。</p><p>LoginPress 提供了免费和专业版插件，专业版提供了更多的功能，如Google字体、Google reCaptcha、选择主题等。如果您希望为您的WordPress网站添加一个外观酷炫的登录页面，LoginPress 是一个必备的插件。</p><h2 id="二、LoginPress功能"><a href="#二、LoginPress功能" class="headerlink" title="二、LoginPress功能"></a>二、LoginPress功能</h2><p>Logo：可以更改登录Logo {image，width，height，padding，URL and Title}。<br>背景：您可以自定义背景图像或颜色。设置其位置、大小和可重复属性。<br>登录表单：即使你可以自定义登录表单{图像或颜色，宽度，高度，填充和边框}。自定义输入文本字段{宽度，边距，文本颜色，标签颜色和背景颜色}。<br>忘记形式：美丽的插件在这里你可以改变背景或颜色的忘记形式。<br>按钮：您可以设置按钮所见即所得的颜色。<br>错误消息：插件的主要功能.您可以更改错误日志消息，因为您希望在LoginPress→ Error Messages中向用户显示。<br>欢迎消息：与错误日志消息相同，您可以通过LoginPress→ Welcome Messages自定义欢迎消息。<br>表单页脚：登录按钮后，这里是表单页脚.您可以自定义页脚{文本、显示、文本装饰、文本颜色、文本悬停颜色和文本大小}。在此部分中，您还可以自定义页脚文本。</p><p>定制后使WordPress登录页面移动的友好<br>这个插件也是响应式的。这意味着，当您自定义登录页面，它会在移动的上看起来不错，即它是响应式的.</p><h2 id="三、演示"><a href="#三、演示" class="headerlink" title="三、演示"></a>三、演示</h2><p>使用reCAPTCHA和Google Fonts需要购买LoginPressPro版，而系统中其他所有工具和服务均可免费使用。无论是进行基础的表单验证、网站数据分析，还是应用多样化的字体样式，平台都为用户提供了全面支持，让在线项目的创建和管理更加高效便捷。</p><p>LoginPress默认主题</p><!-- 这是一张图片，ocr 内容为： --><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2%E6%8F%92%E4%BB%B6/2.png"></p><p>LoginPressProPro主题</p><!-- 这是一张图片，ocr 内容为： --><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2%E6%8F%92%E4%BB%B6/2.png"></p><h2 id="四、LoginPressPro百度网盘下载"><a href="#四、LoginPressPro百度网盘下载" class="headerlink" title="四、LoginPressPro百度网盘下载"></a>四、LoginPressPro百度网盘下载</h2><p>为了确保功能完整使用，建议将LoginPress与其付费升级版本LoginPressPro一并安装，这样可以充分发挥其全部潜力并提升用户体验。</p><blockquote><p>百度网盘地址：<a href="https://pan.baidu.com/s/1gm3aBamBy7o9_7bRZ_WcZg?pwd=xqqn">https://pan.baidu.com/s/1gm3aBamBy7o9_7bRZ_WcZg?pwd&#x3D;xqqn</a><br>提取码：xqqn</p></blockquote></div>]]></content>
      
      
      <categories>
          
          <category> 技术分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Wordpress </tag>
            
            <tag> 技术分享 </tag>
            
            <tag> 插件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>轻博客的粒子浪漫</title>
      <link href="/2024/12/13/%E8%BD%BB%E5%8D%9A%E5%AE%A2%E7%9A%84%E7%B2%92%E5%AD%90%E6%B5%AA%E6%BC%AB/"/>
      <url>/2024/12/13/%E8%BD%BB%E5%8D%9A%E5%AE%A2%E7%9A%84%E7%B2%92%E5%AD%90%E6%B5%AA%E6%BC%AB/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><h2 id="一、鼠标点击烟花特效"><a href="#一、鼠标点击烟花特效" class="headerlink" title="一、鼠标点击烟花特效"></a>一、鼠标点击烟花特效</h2><blockquote><p>鸣谢：<a href="https://juejin.cn/post/7106018120036253710#heading-2">https://juejin.cn/post/7106018120036253710#heading-2</a></p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">clickEffect</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> balls = [];</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> longPressed = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> longPress;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> multiplier = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> width, height;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> origin;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> normal;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> ctx;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> colours = [<span class="string">&quot;#F73859&quot;</span>, <span class="string">&quot;#14FFEC&quot;</span>, <span class="string">&quot;#00E0FF&quot;</span>, <span class="string">&quot;#FF99FE&quot;</span>, <span class="string">&quot;#FAF15D&quot;</span>];</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(canvas);</span></span><br><span class="line"><span class="language-javascript">  canvas.<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;width: 100%; height: 100%; top: 0; left: 0; z-index: 99999; position: fixed; pointer-events: none;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> pointer = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;span&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  pointer.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;pointer&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(pointer);</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (canvas.<span class="property">getContext</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">addEventListener</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">updateSize</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, updateSize, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">loop</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;mousedown&quot;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">pushBalls</span>(<span class="title function_">randBetween</span>(<span class="number">10</span>, <span class="number">20</span>), e.<span class="property">clientX</span>, e.<span class="property">clientY</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;is-pressed&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      longPress = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;is-longpress&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        longPressed = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;, <span class="number">500</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;mouseup&quot;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="built_in">clearInterval</span>(longPress);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (longPressed == <span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;is-longpress&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">pushBalls</span>(<span class="title function_">randBetween</span>(<span class="number">50</span> + <span class="title class_">Math</span>.<span class="title function_">ceil</span>(multiplier), <span class="number">100</span> + <span class="title class_">Math</span>.<span class="title function_">ceil</span>(multiplier)), e.<span class="property">clientX</span>, e.<span class="property">clientY</span>);</span></span><br><span class="line"><span class="language-javascript">        longPressed = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;is-pressed&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;mousemove&quot;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> x = e.<span class="property">clientX</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> y = e.<span class="property">clientY</span>;</span></span><br><span class="line"><span class="language-javascript">      pointer.<span class="property">style</span>.<span class="property">top</span> = y + <span class="string">&quot;px&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      pointer.<span class="property">style</span>.<span class="property">left</span> = x + <span class="string">&quot;px&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;canvas or addEventListener is unsupported!&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">updateSize</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    canvas.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span> * <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript">    canvas.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span> * <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript">    canvas.<span class="property">style</span>.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    canvas.<span class="property">style</span>.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">scale</span>(<span class="number">2</span>, <span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">    width = (canvas.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>);</span></span><br><span class="line"><span class="language-javascript">    height = (canvas.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span>);</span></span><br><span class="line"><span class="language-javascript">    origin = &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">x</span>: width / <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">y</span>: height / <span class="number">2</span></span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">    normal = &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">x</span>: width / <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">y</span>: height / <span class="number">2</span></span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">class</span> <span class="title class_">Ball</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">constructor</span>(<span class="params">x = origin.x, y = origin.y</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">x</span> = x;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">y</span> = y;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">angle</span> = <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>();</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (longPressed == <span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">multiplier</span> = <span class="title function_">randBetween</span>(<span class="number">14</span> + multiplier, <span class="number">15</span> + multiplier);</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">multiplier</span> = <span class="title function_">randBetween</span>(<span class="number">6</span>, <span class="number">12</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">vx</span> = (<span class="variable language_">this</span>.<span class="property">multiplier</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">0.5</span>) * <span class="title class_">Math</span>.<span class="title function_">cos</span>(<span class="variable language_">this</span>.<span class="property">angle</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">vy</span> = (<span class="variable language_">this</span>.<span class="property">multiplier</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">0.5</span>) * <span class="title class_">Math</span>.<span class="title function_">sin</span>(<span class="variable language_">this</span>.<span class="property">angle</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">randBetween</span>(<span class="number">8</span>, <span class="number">12</span>) + <span class="number">3</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>();</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">color</span> = colours[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * colours.<span class="property">length</span>)];</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">update</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">x</span> += <span class="variable language_">this</span>.<span class="property">vx</span> - normal.<span class="property">x</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">y</span> += <span class="variable language_">this</span>.<span class="property">vy</span> - normal.<span class="property">y</span>;</span></span><br><span class="line"><span class="language-javascript">      normal.<span class="property">x</span> = -<span class="number">2</span> / <span class="variable language_">window</span>.<span class="property">innerWidth</span> * <span class="title class_">Math</span>.<span class="title function_">sin</span>(<span class="variable language_">this</span>.<span class="property">angle</span>);</span></span><br><span class="line"><span class="language-javascript">      normal.<span class="property">y</span> = -<span class="number">2</span> / <span class="variable language_">window</span>.<span class="property">innerHeight</span> * <span class="title class_">Math</span>.<span class="title function_">cos</span>(<span class="variable language_">this</span>.<span class="property">angle</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">r</span> -= <span class="number">0.3</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">vx</span> *= <span class="number">0.9</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">vy</span> *= <span class="number">0.9</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">pushBalls</span>(<span class="params">count = <span class="number">1</span>, x = origin.x, y = origin.y</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">      balls.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">Ball</span>(x, y));</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">randBetween</span>(<span class="params">min, max</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * max) + min;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="property">fillStyle</span> = <span class="string">&quot;rgba(255, 255, 255, 0)&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; balls.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> b = balls[i];</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (b.<span class="property">r</span> &lt; <span class="number">0</span>) <span class="keyword">continue</span>;</span></span><br><span class="line"><span class="language-javascript">      ctx.<span class="property">fillStyle</span> = b.<span class="property">color</span>;</span></span><br><span class="line"><span class="language-javascript">      ctx.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">      ctx.<span class="title function_">arc</span>(b.<span class="property">x</span>, b.<span class="property">y</span>, b.<span class="property">r</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">      ctx.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript">      b.<span class="title function_">update</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (longPressed == <span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      multiplier += <span class="number">0.2</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!longPressed &amp;&amp; multiplier &gt;= <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      multiplier -= <span class="number">0.4</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">removeBall</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">requestAnimationFrame</span>(loop);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">removeBall</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; balls.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> b = balls[i];</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (b.<span class="property">x</span> + b.<span class="property">r</span> &lt; <span class="number">0</span> || b.<span class="property">x</span> - b.<span class="property">r</span> &gt; width || b.<span class="property">y</span> + b.<span class="property">r</span> &lt; <span class="number">0</span> || b.<span class="property">y</span> - b.<span class="property">r</span> &gt; height || b.<span class="property">r</span> &lt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        balls.<span class="title function_">splice</span>(i, <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">clickEffect</span>();<span class="comment">//调用特效函数</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="二、鼠标点击爱心特效"><a href="#二、鼠标点击爱心特效" class="headerlink" title="二、鼠标点击爱心特效"></a>二、鼠标点击爱心特效</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 网页鼠标点击特效（爱心） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">         ! <span class="keyword">function</span> (<span class="params">e, t, a</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">r</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">var</span> e = <span class="number">0</span>; e &lt; s.<span class="property">length</span>; e++) s[e].<span class="property">alpha</span> &lt;= <span class="number">0</span> ? (t.<span class="property">body</span>.<span class="title function_">removeChild</span>(s[e].<span class="property">el</span>), s.<span class="title function_">splice</span>(e, <span class="number">1</span>)) : (s[</span></span><br><span class="line"><span class="language-javascript">                        e].<span class="property">y</span>--, s[e].<span class="property">scale</span> += <span class="number">.004</span>, s[e].<span class="property">alpha</span> -= <span class="number">.013</span>, s[e].<span class="property">el</span>.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&quot;left:&quot;</span> + s[e].<span class="property">x</span> +</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;px;top:&quot;</span> + s[e].<span class="property">y</span> + <span class="string">&quot;px;opacity:&quot;</span> + s[e].<span class="property">alpha</span> + <span class="string">&quot;;transform:scale(&quot;</span> + s[e].<span class="property">scale</span> + <span class="string">&quot;,&quot;</span> + s[e]</span></span><br><span class="line"><span class="language-javascript">                    .<span class="property">scale</span> + <span class="string">&quot;) rotate(45deg);background:&quot;</span> + s[e].<span class="property">color</span> + <span class="string">&quot;;z-index:99999&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">requestAnimationFrame</span>(r)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">n</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> t = <span class="string">&quot;function&quot;</span> == <span class="keyword">typeof</span> e.<span class="property">onclick</span> &amp;&amp; e.<span class="property">onclick</span>;</span></span><br><span class="line"><span class="language-javascript">                e.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    t &amp;&amp; <span class="title function_">t</span>(), <span class="title function_">o</span>(e)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">o</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> a = t.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                a.<span class="property">className</span> = <span class="string">&quot;heart&quot;</span>, s.<span class="title function_">push</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">el</span>: a,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">x</span>: e.<span class="property">clientX</span> - <span class="number">5</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">y</span>: e.<span class="property">clientY</span> - <span class="number">5</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">scale</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">alpha</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">color</span>: <span class="title function_">c</span>()</span></span><br><span class="line"><span class="language-javascript">                &#125;), t.<span class="property">body</span>.<span class="title function_">appendChild</span>(a)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">i</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> a = t.<span class="title function_">createElement</span>(<span class="string">&quot;style&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                a.<span class="property">type</span> = <span class="string">&quot;text/css&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    a.<span class="title function_">appendChild</span>(t.<span class="title function_">createTextNode</span>(e))</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (t) &#123;</span></span><br><span class="line"><span class="language-javascript">                    a.<span class="property">styleSheet</span>.<span class="property">cssText</span> = e</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                t.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(a)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="string">&quot;rgb(&quot;</span> + ~~(<span class="number">255</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="string">&quot;,&quot;</span> + ~~(<span class="number">255</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="string">&quot;,&quot;</span> + ~~(<span class="number">255</span> * <span class="title class_">Math</span></span></span><br><span class="line"><span class="language-javascript">                    .<span class="title function_">random</span>()) + <span class="string">&quot;)&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> s = [];</span></span><br><span class="line"><span class="language-javascript">            e.<span class="property">requestAnimationFrame</span> = e.<span class="property">requestAnimationFrame</span> || e.<span class="property">webkitRequestAnimationFrame</span> || e</span></span><br><span class="line"><span class="language-javascript">                .<span class="property">mozRequestAnimationFrame</span> || e.<span class="property">oRequestAnimationFrame</span> || e.<span class="property">msRequestAnimationFrame</span> || <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="built_in">setTimeout</span>(e, <span class="number">1e3</span> / <span class="number">60</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;, <span class="title function_">i</span>(</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                ), <span class="title function_">n</span>(), <span class="title function_">r</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;(<span class="variable language_">window</span>, <span class="variable language_">document</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三、鼠标点击文字特效"><a href="#三、鼠标点击文字特效" class="headerlink" title="三、鼠标点击文字特效"></a>三、鼠标点击文字特效</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> a_idx = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> a = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="string">&quot;❤富强❤&quot;</span>, <span class="string">&quot;❤民主❤&quot;</span>, <span class="string">&quot;❤文明❤&quot;</span>, <span class="string">&quot;❤和谐❤&quot;</span>, <span class="string">&quot;❤自由❤&quot;</span>, <span class="string">&quot;❤平等❤&quot;</span>, <span class="string">&quot;❤公正❤&quot;</span>, <span class="string">&quot;❤法治❤&quot;</span>, <span class="string">&quot;❤爱国❤&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;❤敬业❤&quot;</span>, <span class="string">&quot;❤诚信❤&quot;</span>, <span class="string">&quot;❤友善❤&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> heart = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;b&quot;</span>); <span class="comment">//创建b元素</span></span></span><br><span class="line"><span class="language-javascript">                heart.<span class="property">onselectstart</span> = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&#x27;event.returnValue=false&#x27;</span>); <span class="comment">//防止拖动</span></span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(heart).<span class="property">innerHTML</span> = a[a_idx]; <span class="comment">//将b元素添加到页面上</span></span></span><br><span class="line"><span class="language-javascript">                a_idx = (a_idx + <span class="number">1</span>) % a.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">                heart.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&quot;position: fixed;left:-100%;&quot;</span>; <span class="comment">//给p元素设置样式</span></span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> f = <span class="number">16</span>, <span class="comment">// 字体大小</span></span></span><br><span class="line"><span class="language-javascript">                    x = event.<span class="property">clientX</span> - f / <span class="number">2</span>, <span class="comment">// 横坐标</span></span></span><br><span class="line"><span class="language-javascript">                    y = event.<span class="property">clientY</span> - f, <span class="comment">// 纵坐标</span></span></span><br><span class="line"><span class="language-javascript">                    c = <span class="title function_">randomColor</span>(), <span class="comment">// 随机颜色</span></span></span><br><span class="line"><span class="language-javascript">                    a = <span class="number">1</span>, <span class="comment">// 透明度</span></span></span><br><span class="line"><span class="language-javascript">                    s = <span class="number">1.2</span>; <span class="comment">// 放大缩小</span></span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> timer = <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">//添加定时器</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (a &lt;= <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(heart);</span></span><br><span class="line"><span class="language-javascript">                        <span class="built_in">clearInterval</span>(timer);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        heart.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&quot;font-size:16px;cursor: default;position: fixed;color:&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">                            c + <span class="string">&quot;;left:&quot;</span> + x + <span class="string">&quot;px;top:&quot;</span> + y + <span class="string">&quot;px;opacity:&quot;</span> + a + <span class="string">&quot;;transform:scale(&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">                            s + <span class="string">&quot;);&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">                        y--;</span></span><br><span class="line"><span class="language-javascript">                        a -= <span class="number">0.016</span>;</span></span><br><span class="line"><span class="language-javascript">                        s += <span class="number">0.002</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;, <span class="number">15</span>)</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 随机颜色</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">randomColor</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="string">&quot;rgb(&quot;</span> + (~~(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">255</span>)) + <span class="string">&quot;,&quot;</span> + (~~(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">255</span>)) + <span class="string">&quot;,&quot;</span> + (~~(<span class="title class_">Math</span></span></span><br><span class="line"><span class="language-javascript">                .<span class="title function_">random</span>() * <span class="number">255</span>)) + <span class="string">&quot;)&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;());</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="四、鼠标星星拖尾特效"><a href="#四、鼠标星星拖尾特效" class="headerlink" title="四、鼠标星星拖尾特效"></a>四、鼠标星星拖尾特效</h2><blockquote><p>鸣谢：<a href="https://blog.mingliang.net.cn/go/?url=https://blog.csdn.net/weixin_44461275/article/details/131402453">https://blog.csdn.net/weixin_44461275&#x2F;article&#x2F;details&#x2F;131402453</a></p></blockquote><h3 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">drawStar</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//定义数组，arr存放每个小星星的信息，colour为颜色数组，存几个好看的颜色</span></span><br><span class="line">  <span class="keyword">var</span> arr = [];</span><br><span class="line">  <span class="keyword">var</span> colours = [<span class="string">&quot;#ffff00&quot;</span>, <span class="string">&quot;#66ffff&quot;</span>, <span class="string">&quot;#3399ff&quot;</span>, <span class="string">&quot;#99ff00&quot;</span>, <span class="string">&quot;#ff9900&quot;</span>];</span><br><span class="line">  <span class="keyword">var</span> timeoutList = []; <span class="comment">// 计时器列表-用于后续清理计时器</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 创建画布</span></span><br><span class="line">  <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(canvas)</span><br><span class="line">  <span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 让画布自适应窗口大小，这个复制即可</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">resizeCanvas</span>(<span class="params"></span>) &#123;</span><br><span class="line">    canvas.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">    canvas.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">resizeCanvas</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 给画布css样式，固定定位，且阻止用户的鼠标事件</span></span><br><span class="line">  canvas.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">`</span></span><br><span class="line"><span class="string">    position: fixed;</span></span><br><span class="line"><span class="string">    z-index: 1000;</span></span><br><span class="line"><span class="string">    top: 0;</span></span><br><span class="line"><span class="string">    left: 0;</span></span><br><span class="line"><span class="string">    pointer-events: none;</span></span><br><span class="line"><span class="string">  `</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 封装绘制一个五角星函数</span></span><br><span class="line">  <span class="comment">// x是圆心横坐标，y是圆心纵坐标，其实就是鼠标位置（x ，y）</span></span><br><span class="line">  <span class="comment">// r是里面小圆半径 ，l是大圆半径</span></span><br><span class="line">  <span class="comment">// rot是初始旋转角度</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">star</span>(<span class="params">x, y, r, l, rot</span>) &#123;</span><br><span class="line">    ctx.<span class="title function_">beginPath</span>();</span><br><span class="line">    <span class="comment">// 循环5次，因为5个点</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">      <span class="comment">//先绘制小圆上一个点</span></span><br><span class="line">      ctx.<span class="title function_">lineTo</span>(</span><br><span class="line">        <span class="title class_">Math</span>.<span class="title function_">cos</span>(((<span class="number">18</span> + i * <span class="number">72</span> - rot) * <span class="title class_">Math</span>.<span class="property">PI</span>) / <span class="number">180</span>) * r + x,</span><br><span class="line">        -<span class="title class_">Math</span>.<span class="title function_">sin</span>(((<span class="number">18</span> + i * <span class="number">72</span> - rot) * <span class="title class_">Math</span>.<span class="property">PI</span>) / <span class="number">180</span>) * r + y</span><br><span class="line">      );</span><br><span class="line">      <span class="comment">//连线到大圆上一个点</span></span><br><span class="line">      ctx.<span class="title function_">lineTo</span>(</span><br><span class="line">        <span class="title class_">Math</span>.<span class="title function_">cos</span>(((<span class="number">54</span> + i * <span class="number">72</span> - rot) * <span class="title class_">Math</span>.<span class="property">PI</span>) / <span class="number">180</span>) * l + x,</span><br><span class="line">        -<span class="title class_">Math</span>.<span class="title function_">sin</span>(((<span class="number">54</span> + i * <span class="number">72</span> - rot) * <span class="title class_">Math</span>.<span class="property">PI</span>) / <span class="number">180</span>) * l + y</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    ctx.<span class="title function_">closePath</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 绘制一堆星星</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//循环数组</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> temp = arr[i];</span><br><span class="line">      <span class="comment">//调用绘制一个星星函数</span></span><br><span class="line">      <span class="title function_">star</span>(temp.<span class="property">x</span>, temp.<span class="property">y</span>, temp.<span class="property">r</span>, temp.<span class="property">r</span> * <span class="number">3</span>, temp.<span class="property">rot</span>);</span><br><span class="line">      <span class="comment">//星星颜色</span></span><br><span class="line">      ctx.<span class="property">fillStyle</span> = temp.<span class="property">color</span>;</span><br><span class="line">      <span class="comment">//星星边框颜色</span></span><br><span class="line">      ctx.<span class="property">strokeStyle</span> = temp.<span class="property">color</span>;</span><br><span class="line">      <span class="comment">//线宽度</span></span><br><span class="line">      ctx.<span class="property">lineWidth</span> = <span class="number">0.1</span>;</span><br><span class="line">      <span class="comment">//角有弧度</span></span><br><span class="line">      ctx.<span class="property">lineJoin</span> = <span class="string">&quot;round&quot;</span>;</span><br><span class="line">      <span class="comment">// 填充</span></span><br><span class="line">      ctx.<span class="title function_">fill</span>();</span><br><span class="line">      <span class="comment">// 绘制路径</span></span><br><span class="line">      ctx.<span class="title function_">stroke</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//更新动画</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">update</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//循环数组</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="comment">// x坐标+dx移动距离</span></span><br><span class="line">      arr[i].<span class="property">x</span> += arr[i].<span class="property">dx</span>;</span><br><span class="line">      <span class="comment">// y坐标+dy移动距离</span></span><br><span class="line">      arr[i].<span class="property">y</span> += arr[i].<span class="property">dy</span>;</span><br><span class="line">      <span class="comment">// 加上旋转角度</span></span><br><span class="line">      arr[i].<span class="property">rot</span> += arr[i].<span class="property">td</span>;</span><br><span class="line">      <span class="comment">// 半径慢慢减小</span></span><br><span class="line">      arr[i].<span class="property">r</span> -= <span class="number">0.015</span>;</span><br><span class="line">      <span class="comment">// 当半径小于0时</span></span><br><span class="line">      <span class="keyword">if</span> (arr[i].<span class="property">r</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//删除该星星</span></span><br><span class="line">        arr.<span class="title function_">splice</span>(i, <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 添加当前位置星星数据</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">addStarts</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// 每移动触发一次事件给arr数组添加一个星星</span></span><br><span class="line">    arr.<span class="title function_">push</span>(&#123;</span><br><span class="line">      <span class="comment">// x是初始横坐标</span></span><br><span class="line">      <span class="attr">x</span>: e.<span class="property">clientX</span>,</span><br><span class="line">      <span class="comment">//y是初始纵坐标</span></span><br><span class="line">      <span class="attr">y</span>: e.<span class="property">clientY</span>,</span><br><span class="line">      <span class="comment">//r是星星里面那个小圆半径，哪来的小圆等会说</span></span><br><span class="line">      <span class="attr">r</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">0.5</span> + <span class="number">1.5</span>,</span><br><span class="line">      <span class="comment">//运动时旋转的角度</span></span><br><span class="line">      <span class="attr">td</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">4</span> - <span class="number">2</span>,</span><br><span class="line">      <span class="comment">// X轴移动距离</span></span><br><span class="line">      <span class="attr">dx</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">2</span> - <span class="number">1</span>,</span><br><span class="line">      <span class="comment">// y轴移动距离</span></span><br><span class="line">      <span class="attr">dy</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">1</span> + <span class="number">1</span>,</span><br><span class="line">      <span class="comment">// 初始的旋转角度</span></span><br><span class="line">      <span class="attr">rot</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">90</span> + <span class="number">90</span>,</span><br><span class="line">      <span class="comment">// 颜色</span></span><br><span class="line">      <span class="attr">color</span>: colours[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * colours.<span class="property">length</span>)],</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 监听屏幕变化事件</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">onresize</span> = resizeCanvas;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 监听鼠标移动事件</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;mousemove&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 添加星星数据</span></span><br><span class="line">    <span class="title function_">addStarts</span>(e);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置100毫秒内效果</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; <span class="number">200</span>; index++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (index === <span class="number">0</span> &amp;&amp; timeoutList.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> timeoutName <span class="keyword">of</span> timeoutList) &#123;</span><br><span class="line">          <span class="built_in">clearTimeout</span>(timeoutName)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      timeoutList[index] = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//清屏</span></span><br><span class="line">        ctx.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>);</span><br><span class="line">        <span class="comment">//绘制</span></span><br><span class="line">        <span class="title function_">draw</span>();</span><br><span class="line">        <span class="comment">//更新</span></span><br><span class="line">        <span class="title function_">update</span>();</span><br><span class="line">      &#125;, index * <span class="number">20</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">drawStar</span>()</span><br></pre></td></tr></table></figure><h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;js-cursor-container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        (<span class="keyword">function</span> <span class="title function_">fairyDustCursor</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> possibleColors = [<span class="string">&quot;#D61C59&quot;</span>, <span class="string">&quot;#E7D84B&quot;</span>, <span class="string">&quot;#1B8798&quot;</span>]</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> width = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> height = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> cursor = &#123; <span class="attr">x</span>: width / <span class="number">2</span>, <span class="attr">y</span>: width / <span class="number">2</span> &#125;;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> particles = [];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">bindEvents</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">loop</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// Bind events that are needed</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">bindEvents</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, onMouseMove);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, onWindowResize);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">onWindowResize</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                width = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span></span><br><span class="line"><span class="language-javascript">                height = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">onMouseMove</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                cursor.<span class="property">x</span> = e.<span class="property">clientX</span>;</span></span><br><span class="line"><span class="language-javascript">                cursor.<span class="property">y</span> = e.<span class="property">clientY</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">addParticle</span>(cursor.<span class="property">x</span>, cursor.<span class="property">y</span>, possibleColors[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * possibleColors.<span class="property">length</span>)]);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">addParticle</span>(<span class="params">x, y, color</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> particle = <span class="keyword">new</span> <span class="title class_">Particle</span>();</span></span><br><span class="line"><span class="language-javascript">                particle.<span class="title function_">init</span>(x, y, color);</span></span><br><span class="line"><span class="language-javascript">                particles.<span class="title function_">push</span>(particle);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">updateParticles</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// Updated</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; particles.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                    particles[i].<span class="title function_">update</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// Remove dead particles</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">var</span> i = particles.<span class="property">length</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i-) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (particles[i].<span class="property">lifeSpan</span> &lt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        particles[i].<span class="title function_">die</span>();</span></span><br><span class="line"><span class="language-javascript">                        particles.<span class="title function_">splice</span>(i, <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">requestAnimationFrame</span>(loop);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">updateParticles</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">             * Particles</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">             */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">Particle</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">character</span> = <span class="string">&quot;*&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">lifeSpan</span> = <span class="number">120</span>; <span class="comment">//ms</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">initialStyles</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;position&quot;</span>: <span class="string">&quot;fixed&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;display&quot;</span>: <span class="string">&quot;inline-block&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;top&quot;</span>: <span class="string">&quot;0px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;left&quot;</span>: <span class="string">&quot;0px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;pointerEvents&quot;</span>: <span class="string">&quot;none&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;touch-action&quot;</span>: <span class="string">&quot;none&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;z-index&quot;</span>: <span class="string">&quot;10000000&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;fontSize&quot;</span>: <span class="string">&quot;25px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;will-change&quot;</span>: <span class="string">&quot;transform&quot;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// Init, and set properties</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">init</span> = <span class="keyword">function</span> (<span class="params">x, y, color</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">velocity</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">x</span>: (<span class="title class_">Math</span>.<span class="title function_">random</span>() &lt; <span class="number">0.5</span> ? -<span class="number">1</span> : <span class="number">1</span>) * (<span class="title class_">Math</span>.<span class="title function_">random</span>() / <span class="number">2</span>),</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">y</span>: <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">position</span> = &#123; <span class="attr">x</span>: x + <span class="number">10</span>, <span class="attr">y</span>: y + <span class="number">10</span> &#125;;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">initialStyles</span>.<span class="property">color</span> = color;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">element</span> = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;span&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">element</span>.<span class="property">innerHTML</span> = <span class="variable language_">this</span>.<span class="property">character</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">applyProperties</span>(<span class="variable language_">this</span>.<span class="property">element</span>, <span class="variable language_">this</span>.<span class="property">initialStyles</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">update</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.js-cursor-container&#x27;</span>).<span class="title function_">appendChild</span>(<span class="variable language_">this</span>.<span class="property">element</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">update</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">position</span>.<span class="property">x</span> += <span class="variable language_">this</span>.<span class="property">velocity</span>.<span class="property">x</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">position</span>.<span class="property">y</span> += <span class="variable language_">this</span>.<span class="property">velocity</span>.<span class="property">y</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">lifeSpan</span>-;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">element</span>.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">&quot;translate3d(&quot;</span> + <span class="variable language_">this</span>.<span class="property">position</span>.<span class="property">x</span> + <span class="string">&quot;px,&quot;</span> + <span class="variable language_">this</span>.<span class="property">position</span>.<span class="property">y</span> + <span class="string">&quot;px, 0) scale(&quot;</span> + (<span class="variable language_">this</span>.<span class="property">lifeSpan</span> / <span class="number">120</span>) + <span class="string">&quot;)&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">die</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">element</span>.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(<span class="variable language_">this</span>.<span class="property">element</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">             * Utils</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">             */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// Applies css `properties` to an element.</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">applyProperties</span>(<span class="params">target, properties</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> properties) &#123;</span></span><br><span class="line"><span class="language-javascript">                    target.<span class="property">style</span>[key] = properties[key];</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!(<span class="string">&#x27;ontouchstart&#x27;</span> <span class="keyword">in</span> <span class="variable language_">window</span> || navigator.<span class="property">msMaxTouchPoints</span>)) <span class="title function_">init</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;)();    </span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div>]]></content>
      
      
      <categories>
          
          <category> 技术分享 </category>
          
          <category> Wordpress </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Wordpress </tag>
            
            <tag> 技术分享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WordPress纯代码实现圆角彩色背景标签云</title>
      <link href="/2024/08/20/%E6%A0%87%E7%AD%BE%E4%BA%91/"/>
      <url>/2024/08/20/%E6%A0%87%E7%AD%BE%E4%BA%91/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>**标签云 **对我们的文章画龙点睛，如果让我们的标签云随机产生彩色效果，更是增加了不是个性化，我们现在抛弃插件，自己动手从网上学习DIY自己的彩色标签云。</p><h2 id="二、代码部署"><a href="#二、代码部署" class="headerlink" title="二、代码部署"></a>二、代码部署</h2><p>代码需放入主题目录下的tag-color-cloud.php文件中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">/**</span><br><span class="line"> * 彩色圆角标签云</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">if</span> ( ! defined( <span class="string">&#x27;ABSPATH&#x27;</span> ) ) &#123; <span class="built_in">exit</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> colorCloud( <span class="variable">$text</span> ) &#123;</span><br><span class="line">    <span class="built_in">return</span> preg_replace_callback(</span><br><span class="line">        <span class="string">&#x27;|&lt;a (.+?)&gt;|i&#x27;</span>,</span><br><span class="line">        <span class="keyword">function</span> ( <span class="variable">$m</span> ) &#123;</span><br><span class="line">            <span class="variable">$colors</span> = array( <span class="string">&#x27;F99&#x27;</span>, <span class="string">&#x27;C9C&#x27;</span>, <span class="string">&#x27;F96&#x27;</span>, <span class="string">&#x27;6CC&#x27;</span>, <span class="string">&#x27;6C9&#x27;</span>, <span class="string">&#x27;37A7FF&#x27;</span>, <span class="string">&#x27;B0D686&#x27;</span>, <span class="string">&#x27;E6CC6E&#x27;</span> );</span><br><span class="line">            <span class="variable">$color</span>  = <span class="variable">$colors</span>[ array_rand( <span class="variable">$colors</span> ) ];</span><br><span class="line"></span><br><span class="line">            // 去掉原有的 style 属性（若有）</span><br><span class="line">            <span class="variable">$attrs</span> = preg_replace( <span class="string">&#x27;/style=([&quot;\&#x27;</span>])(.*?)\1/i<span class="string">&#x27;, &#x27;</span><span class="string">&#x27;, $m[1] );</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            // 追加新样式</span></span><br><span class="line"><span class="string">            $style  = &quot;display:inline-block;color:#fff;padding:1px 5px;margin:0 5px 5px 0;&quot;;</span></span><br><span class="line"><span class="string">            $style .= &quot;background-color:#&#123;$color&#125;;border-radius:3px;&quot;;</span></span><br><span class="line"><span class="string">            $style .= &quot;transition:background-color .4s linear;&quot;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            return &#x27;</span>&lt;a <span class="string">&#x27; . $attrs . &#x27;</span> style=<span class="string">&quot;&#x27; . <span class="variable">$style</span> . &#x27;&quot;</span>&gt;<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        $text</span></span><br><span class="line"><span class="string">    );</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">add_filter( &#x27;</span>wp_tag_cloud<span class="string">&#x27;, &#x27;</span>colorCloud<span class="string">&#x27;, 10 );</span></span><br></pre></td></tr></table></figure><p>最后在functions.php中调用即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/* 彩色圆角标签云 */</span><br><span class="line">require_once get_template_directory() . <span class="string">&#x27;/self-innovate/tag-color-cloud.php&#x27;</span>;</span><br></pre></td></tr></table></figure></div>]]></content>
      
      
      <categories>
          
          <category> Wordpress </category>
          
          <category> 技术分享 </category>
          
          <category> 标签云 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Wordpress </tag>
            
            <tag> 技术分享 </tag>
            
            <tag> 标签云 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>快速迁移网站</title>
      <link href="/2024/07/22/%E5%BF%AB%E9%80%9F%E8%BF%81%E7%A7%BB%E7%BD%91%E7%AB%99/"/>
      <url>/2024/07/22/%E5%BF%AB%E9%80%9F%E8%BF%81%E7%A7%BB%E7%BD%91%E7%AB%99/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>从建站开始到现在也有一年了，也看着服务器马上就要到期了。现在有俩个选择可以解决这个问题，其一是在现有的服务器上选择续费，但是成本很高，由于笔者的网站在建站的这一年之内也没有什么收入，所以很难拿出这么一大笔的费用，那么只能选择其二了，那就是购买一台新的服务器，毕竟在有活动的时候够买，相对来说还是很便宜的，但是如果购买新的服务器的话，也会面临一定的问题比如如何将网站从旧的服务器迁移到新的服务器。</p><p>先总结一下迁移的思路吧：</p><ul><li>首先要给新的服务器安装上和旧服务器一样的宝塔环境，包括php版本、mysql版本，这样能避免网站数据出错。</li><li>网站数据一定要提前备份，防止出现其他问题可以方便恢复。</li><li>然后在发送数据服务器上安装一键迁移工具，填写接收数据服务器信息，包括秘钥，就可以开始自动迁移了。</li></ul><h2 id="二、安装迁移工具"><a href="#二、安装迁移工具" class="headerlink" title="二、安装迁移工具"></a>二、安装迁移工具</h2><p>直接在宝塔面板的软件商店搜索<code>一键迁移</code>，即可找到宝塔一键迁移API版本，点击安装即可。</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/blog%E8%BF%81%E7%A7%BB/1.png"></p><h2 id="三、配置API"><a href="#三、配置API" class="headerlink" title="三、配置API"></a>三、配置API</h2><p>接收数据服务器上，点击面板设置，开启API，获得接口秘钥，并将发送数据端IP加入接收数据服务器API的IP白名单，最后点击保存即可。</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/blog%E8%BF%81%E7%A7%BB/2.png"></p><h2 id="四、开启迁移"><a href="#四、开启迁移" class="headerlink" title="四、开启迁移"></a>四、开启迁移</h2><p>发送数据服务器上，找到我们刚刚下载的宝塔一键迁移API版本，填写面板地址和API秘钥。<br>注意：面板地址和API秘钥都是接收数据服务器、接收数据服务器、接收数据服务器上的，千万别填错了。<br>面板地址包含 协议 + 主机IP地址 + 面板端口<br>例如：<a href="http://192.168.0.1:8888/">http://192.168.0.1:8888</a></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/blog%E8%BF%81%E7%A7%BB/3.png"></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/blog%E8%BF%81%E7%A7%BB/4.png"></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/blog%E8%BF%81%E7%A7%BB/5.png"></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/blog%E8%BF%81%E7%A7%BB/6.png"></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/blog%E8%BF%81%E7%A7%BB/7.png"></p><h2 id="五、解析测试"><a href="#五、解析测试" class="headerlink" title="五、解析测试"></a>五、解析测试</h2><p>迁移完成后，网站文件和数据库就都已经到新的网站了，这个时候域名再重新解析到新的网站就可以正常访问了。</p></div>]]></content>
      
      
      <categories>
          
          <category> 技术分享 </category>
          
          <category> 宝塔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术分享 </tag>
            
            <tag> 宝塔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WordPress中Cravatar头像无法访问</title>
      <link href="/2024/05/27/Cravatar%E5%A4%B4%E5%83%8F%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE/"/>
      <url>/2024/05/27/Cravatar%E5%A4%B4%E5%83%8F%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>一般情况下，WordPress默认都是使用Gravatar头像，如果用户没有注册过Gravatar头像，那就使用网站设置的默认头像，这样用户体验不是很好；再则，如果直接调用远程Gravatar头像，还会影响网站的加载速度(WordPress缓存Gravatar头像到本地，提高加载速度)。所以，作为一个开放注册的WordPress网站而言，在用户资料页面添加自定义用户头像功能是极为重要的。</p><p>Gravatar有时候无法访问导致头像显示不出来，只能使用默认的头像，要解决这个问题我这有三种方法：</p><ul><li>使用Simple Local Avatars插件</li><li>代码配置、</li><li>使用国内的Gravatar为 WordPress 集成</li></ul><p>总体来说插件是最简单稳定的，下面会分别介绍这三种方法，大家可以自行选择</p><h2 id="二、插件"><a href="#二、插件" class="headerlink" title="二、插件"></a>二、插件</h2><p>站长可以在 <a href="https://blog.mingliang.net.cn/go/?url=https://mingliang.net.cn/"><em><strong>WordPress</strong></em></a>后台直接搜索插件<code>_**Simple Local Avatars**_</code>进行在线安装，启用之后可以在<code>仪表盘</code>&gt;&gt; <code>用户</code> &gt;&gt; <code>我的个人资料</code>进行头像设置，同理管理员也可以修改其他用户头像。</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Cravatar/1.png"></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Cravatar/2.png"></p><h2 id="三、代码配置"><a href="#三、代码配置" class="headerlink" title="三、代码配置"></a>三、代码配置</h2><p>Simple Local Avatars 是英文的，只有一个主文件 simple-local-avatars.php，你也可以将这个功能直接集成到你的主题中，只需将该插件的 simple-local-avatars.php 放到正在使用的主题的根目录，然后在 functions.php文件中使用下面的代码引入该文件即可：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require_once(TEMPLATEPATH . <span class="string">&#x27;/simple-local-avatars.php&#x27;</span>);</span><br></pre></td></tr></table></figure><p>通过以上的两种方式，你的网站已经具备了自定义用户头像功能。那么，如何调用自定义头像？很简单，可以调用get_simple_local_avatar 或 get_avatar 函数即可，例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php <span class="built_in">echo</span> get_avatar(get_the_author_meta(<span class="string">&#x27;ID&#x27;</span>)); ?&gt;</span><br></pre></td></tr></table></figure><blockquote><p>如果你已设置了Gravatar头像，也上传了自定义头像，优先显示自定义头像</p></blockquote><p>simple-local-avatars.php 完整代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"> </span><br><span class="line">/**</span><br><span class="line"> </span><br><span class="line">Plugin Name: Simple Local Avatars</span><br><span class="line"> </span><br><span class="line">Plugin URI: http://get10up.com/plugins/simple-local-avatars-wordpress/</span><br><span class="line"> </span><br><span class="line">Description: Adds an avatar upload field to user profiles <span class="keyword">if</span> the current user has media permissions. Generates requested sizes on demand just like Gravatar! Simple and lightweight.</span><br><span class="line"> </span><br><span class="line">Version: 1.3.1</span><br><span class="line"> </span><br><span class="line">Author: Jake Goldman (10up LLC), Oomph Inc</span><br><span class="line"> </span><br><span class="line">Author URI: http://get10up.com</span><br><span class="line"> </span><br><span class="line">Plugin: Copyright 2011 Jake Goldman (email : jake@get10up.com)</span><br><span class="line"> </span><br><span class="line">This program is free software; you can redistribute it and/or modify</span><br><span class="line"> </span><br><span class="line">it under the terms of the GNU General Public License as published by</span><br><span class="line"> </span><br><span class="line">the Free Software Foundation; either version 2 of the License, or</span><br><span class="line"> </span><br><span class="line">(at your option) any later version.</span><br><span class="line"> </span><br><span class="line">This program is distributed <span class="keyword">in</span> the hope that it will be useful,</span><br><span class="line"> </span><br><span class="line">but WITHOUT ANY WARRANTY; without even the implied warranty of</span><br><span class="line"> </span><br><span class="line">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span><br><span class="line"> </span><br><span class="line">GNU General Public License <span class="keyword">for</span> more details.</span><br><span class="line"> </span><br><span class="line">You should have received a copy of the GNU General Public License</span><br><span class="line"> </span><br><span class="line">along with this program; <span class="keyword">if</span> not, write to the Free Software</span><br><span class="line"> </span><br><span class="line">Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA</span><br><span class="line"> </span><br><span class="line">NOTE: Previous versions may have accidentally and incorrectly attributed the</span><br><span class="line"> </span><br><span class="line">copyright to employers of Mr. Goldman. While credit is given to all contributors</span><br><span class="line"> </span><br><span class="line">to the current version, including Mr. Goldman<span class="string">&#x27;s employers, the copyright belongs</span></span><br><span class="line"><span class="string">- and has always belonged - to Mr. Goldman, personally.</span></span><br><span class="line"><span class="string">*/</span></span><br><span class="line"><span class="string">/**</span></span><br><span class="line"><span class="string">* add field to user profiles</span></span><br><span class="line"><span class="string">*/</span></span><br><span class="line"><span class="string">class Simple_Local_Avatars &#123;</span></span><br><span class="line"><span class="string">private $user_id_being_edited;</span></span><br><span class="line"><span class="string">public function __construct() &#123;</span></span><br><span class="line"><span class="string">add_filter( &#x27;</span>get_avatar<span class="string">&#x27;, array( $this, &#x27;</span>get_avatar<span class="string">&#x27; ), 10, 5 );</span></span><br><span class="line"><span class="string">add_action( &#x27;</span>admin_init<span class="string">&#x27;, array( $this, &#x27;</span>admin_init<span class="string">&#x27; ) );</span></span><br><span class="line"><span class="string">add_action( &#x27;</span>show_user_profile<span class="string">&#x27;, array( $this, &#x27;</span>edit_user_profile<span class="string">&#x27; ) );</span></span><br><span class="line"><span class="string">add_action( &#x27;</span>edit_user_profile<span class="string">&#x27;, array( $this, &#x27;</span>edit_user_profile<span class="string">&#x27; ) );</span></span><br><span class="line"><span class="string">add_action( &#x27;</span>personal_options_update<span class="string">&#x27;, array( $this, &#x27;</span>edit_user_profile_update<span class="string">&#x27; ) );</span></span><br><span class="line"><span class="string">add_action( &#x27;</span>edit_user_profile_update<span class="string">&#x27;, array( $this, &#x27;</span>edit_user_profile_update<span class="string">&#x27; ) );</span></span><br><span class="line"><span class="string">add_filter( &#x27;</span>avatar_defaults<span class="string">&#x27;, array( $this, &#x27;</span>avatar_defaults<span class="string">&#x27; ) );</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">public function get_avatar( $avatar = &#x27;</span><span class="string">&#x27;, $id_or_email, $size = 96, $default = &#x27;</span><span class="string">&#x27;, $alt = false ) &#123;</span></span><br><span class="line"><span class="string">if ( is_numeric($id_or_email) )</span></span><br><span class="line"><span class="string">$user_id = (int) $id_or_email;</span></span><br><span class="line"><span class="string">elseif ( is_string( $id_or_email ) &amp;&amp; ( $user = get_user_by( &#x27;</span>email<span class="string">&#x27;, $id_or_email ) ) )</span></span><br><span class="line"><span class="string">$user_id = $user-&gt;ID;</span></span><br><span class="line"><span class="string">elseif ( is_object( $id_or_email ) &amp;&amp; ! empty( $id_or_email-&gt;user_id ) )</span></span><br><span class="line"><span class="string">$user_id = (int) $id_or_email-&gt;user_id;</span></span><br><span class="line"><span class="string">if ( empty( $user_id ) )</span></span><br><span class="line"><span class="string">return $avatar;</span></span><br><span class="line"><span class="string">$local_avatars = get_user_meta( $user_id, &#x27;</span>simple_local_avatar<span class="string">&#x27;, true );</span></span><br><span class="line"><span class="string">if ( empty( $local_avatars ) || empty( $local_avatars[&#x27;</span>full<span class="string">&#x27;] ) )</span></span><br><span class="line"><span class="string">return $avatar;</span></span><br><span class="line"><span class="string">$size = (int) $size;</span></span><br><span class="line"><span class="string">if ( empty( $alt ) )</span></span><br><span class="line"><span class="string">$alt = get_the_author_meta( &#x27;</span>display_name<span class="string">&#x27;, $user_id );</span></span><br><span class="line"><span class="string">// generate a new size</span></span><br><span class="line"><span class="string">if ( empty( $local_avatars[$size] ) ) &#123;</span></span><br><span class="line"><span class="string">$upload_path = wp_upload_dir();</span></span><br><span class="line"><span class="string">$avatar_full_path = str_replace( $upload_path[&#x27;</span>baseurl<span class="string">&#x27;], $upload_path[&#x27;</span>basedir<span class="string">&#x27;], $local_avatars[&#x27;</span>full<span class="string">&#x27;] );</span></span><br><span class="line"><span class="string">$image_sized = image_resize( $avatar_full_path, $size, $size, true );</span></span><br><span class="line"><span class="string">// deal with original being &gt;= to original image (or lack of sizing ability)</span></span><br><span class="line"><span class="string">$local_avatars[$size] = is_wp_error($image_sized) ? $local_avatars[$size] = $local_avatars[&#x27;</span>full<span class="string">&#x27;] : str_replace( $upload_path[&#x27;</span>basedir<span class="string">&#x27;], $upload_path[&#x27;</span>baseurl<span class="string">&#x27;], $image_sized );</span></span><br><span class="line"><span class="string">// save updated avatar sizes</span></span><br><span class="line"><span class="string">update_user_meta( $user_id, &#x27;</span>simple_local_avatar<span class="string">&#x27;, $local_avatars );</span></span><br><span class="line"><span class="string">&#125; elseif ( substr( $local_avatars[$size], 0, 4 ) != &#x27;</span>http<span class="string">&#x27; ) &#123;</span></span><br><span class="line"><span class="string">$local_avatars[$size] = home_url( $local_avatars[$size] );</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">$author_class = is_author( $user_id ) ? &#x27;</span> current-author<span class="string">&#x27; : &#x27;</span><span class="string">&#x27; ;</span></span><br><span class="line"><span class="string">$avatar = &quot;&lt;img alt=&#x27;</span><span class="string">&quot; . esc_attr( <span class="variable">$alt</span> ) . &quot;</span><span class="string">&#x27; src=&#x27;</span><span class="string">&quot; . <span class="variable">$local_avatars</span>[<span class="variable">$size</span>] . &quot;</span><span class="string">&#x27; class=&#x27;</span>avatar avatar-&#123;<span class="variable">$size</span>&#125;&#123;<span class="variable">$author_class</span>&#125; photo<span class="string">&#x27; height=&#x27;</span>&#123;<span class="variable">$size</span>&#125;<span class="string">&#x27; width=&#x27;</span>&#123;<span class="variable">$size</span>&#125;<span class="string">&#x27; /&gt;&quot;;</span></span><br><span class="line"><span class="string">return apply_filters( &#x27;</span>simple_local_avatar<span class="string">&#x27;, $avatar );</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">public function admin_init() &#123;</span></span><br><span class="line"><span class="string">load_plugin_textdomain( &#x27;</span>simple-local-avatars<span class="string">&#x27;, false, dirname( plugin_basename( __FILE__ ) ) . &#x27;</span>/localization/<span class="string">&#x27; );</span></span><br><span class="line"><span class="string">register_setting( &#x27;</span>discussion<span class="string">&#x27;, &#x27;</span>simple_local_avatars_caps<span class="string">&#x27;, array( $this, &#x27;</span>sanitize_options<span class="string">&#x27; ) );</span></span><br><span class="line"><span class="string">add_settings_field( &#x27;</span>simple-local-avatars-caps<span class="string">&#x27;, __(&#x27;</span>Local Avatar Permissions<span class="string">&#x27;,&#x27;</span>simple-local-avatars<span class="string">&#x27;), array( $this, &#x27;</span>avatar_settings_field<span class="string">&#x27; ), &#x27;</span>discussion<span class="string">&#x27;, &#x27;</span>avatars<span class="string">&#x27; );</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">public function sanitize_options( $input ) &#123;</span></span><br><span class="line"><span class="string">$new_input[&#x27;</span>simple_local_avatars_caps<span class="string">&#x27;] = empty( $input[&#x27;</span>simple_local_avatars_caps<span class="string">&#x27;] ) ? 0 : 1;</span></span><br><span class="line"><span class="string">return $new_input;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">public function avatar_settings_field( $args ) &#123;</span></span><br><span class="line"><span class="string">$options = get_option(&#x27;</span>simple_local_avatars_caps<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">echo &#x27;</span></span><br><span class="line"> </span><br><span class="line">&lt;label <span class="keyword">for</span>=<span class="string">&quot;simple_local_avatars_caps&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;simple_local_avatars_caps&quot;</span> <span class="built_in">id</span>=<span class="string">&quot;simple_local_avatars_caps&quot;</span> value=<span class="string">&quot;1&quot;</span> <span class="string">&#x27; . @checked( $options[&#x27;</span>simple_local_avatars_caps<span class="string">&#x27;], 1, false ) . &#x27;</span> /&gt;</span><br><span class="line"> </span><br><span class="line"><span class="string">&#x27; . __(&#x27;</span>Only allow <span class="built_in">users</span> with file upload capabilities to upload <span class="built_in">local</span> avatars (Authors and above)<span class="string">&#x27;,&#x27;</span>simple-local-avatars<span class="string">&#x27;) . &#x27;</span></span><br><span class="line"> </span><br><span class="line">&lt;/label&gt;</span><br><span class="line"> </span><br><span class="line"><span class="string">&#x27;;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">public function edit_user_profile( $profileuser ) &#123;</span></span><br><span class="line"><span class="string">?&gt;</span></span><br><span class="line"><span class="string">&lt;h3&gt;&lt;?php _e( &#x27;</span>Avatar<span class="string">&#x27;,&#x27;</span>simple-local-avatars<span class="string">&#x27; ); ?&gt;&lt;/h3&gt;</span></span><br><span class="line"><span class="string">&lt;table class=&quot;form-table&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;tr&gt;</span></span><br><span class="line"><span class="string">&lt;th&gt;&lt;label for=&quot;simple-local-avatar&quot;&gt;&lt;?php _e(&#x27;</span>Upload Avatar<span class="string">&#x27;,&#x27;</span>simple-local-avatars<span class="string">&#x27;); ?&gt;&lt;/label&gt;&lt;/th&gt;</span></span><br><span class="line"><span class="string">&lt;td style=&quot;width: 50px;&quot; valign=&quot;top&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;?php echo get_avatar( $profileuser-&gt;ID ); ?&gt;</span></span><br><span class="line"><span class="string">&lt;/td&gt;</span></span><br><span class="line"><span class="string">&lt;td&gt;</span></span><br><span class="line"><span class="string">&lt;?php</span></span><br><span class="line"><span class="string">$options = get_option(&#x27;</span>simple_local_avatars_caps<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">if ( empty($options[&#x27;</span>simple_local_avatars_caps<span class="string">&#x27;]) || current_user_can(&#x27;</span>upload_files<span class="string">&#x27;) ) &#123;</span></span><br><span class="line"><span class="string">do_action( &#x27;</span>simple_local_avatar_notices<span class="string">&#x27; );</span></span><br><span class="line"><span class="string">wp_nonce_field( &#x27;</span>simple_local_avatar_nonce<span class="string">&#x27;, &#x27;</span>_simple_local_avatar_nonce<span class="string">&#x27;, false );</span></span><br><span class="line"><span class="string">?&gt;</span></span><br><span class="line"><span class="string">&lt;input type=&quot;file&quot; name=&quot;simple-local-avatar&quot; id=&quot;simple-local-avatar&quot; /&gt;&lt;br /&gt;</span></span><br><span class="line"><span class="string">&lt;?php</span></span><br><span class="line"><span class="string">if ( empty( $profileuser-&gt;simple_local_avatar ) )</span></span><br><span class="line"><span class="string">echo &#x27;</span>&lt;span class=<span class="string">&quot;description&quot;</span>&gt;<span class="string">&#x27; . __(&#x27;</span>No <span class="built_in">local</span> avatar is <span class="built_in">set</span>. Use the upload field to add a <span class="built_in">local</span> avatar.<span class="string">&#x27;,&#x27;</span>simple-local-avatars<span class="string">&#x27;) . &#x27;</span>&lt;/span&gt;<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">else</span></span><br><span class="line"><span class="string">echo &#x27;</span></span><br><span class="line"> </span><br><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;simple-local-avatar-erase&quot;</span> value=<span class="string">&quot;1&quot;</span> /&gt; <span class="string">&#x27; . __(&#x27;</span>Delete <span class="built_in">local</span> avatar<span class="string">&#x27;,&#x27;</span>simple-local-avatars<span class="string">&#x27;) . &#x27;</span>&lt;br /&gt;</span><br><span class="line"> </span><br><span class="line">&lt;span class=<span class="string">&quot;description&quot;</span>&gt;<span class="string">&#x27; . __(&#x27;</span>Replace the <span class="built_in">local</span> avatar by uploading a new avatar, or erase the <span class="built_in">local</span> avatar (falling back to a gravatar) by checking the delete option.<span class="string">&#x27;,&#x27;</span>simple-local-avatars<span class="string">&#x27;) . &#x27;</span>&lt;/span&gt;</span><br><span class="line"> </span><br><span class="line"><span class="string">&#x27;;</span></span><br><span class="line"><span class="string">&#125; else &#123;</span></span><br><span class="line"><span class="string">if ( empty( $profileuser-&gt;simple_local_avatar ) )</span></span><br><span class="line"><span class="string">echo &#x27;</span>&lt;span class=<span class="string">&quot;description&quot;</span>&gt;<span class="string">&#x27; . __(&#x27;</span>No <span class="built_in">local</span> avatar is <span class="built_in">set</span>. Set up your avatar at Gravatar.com.<span class="string">&#x27;,&#x27;</span>simple-local-avatars<span class="string">&#x27;) . &#x27;</span>&lt;/span&gt;<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">else</span></span><br><span class="line"><span class="string">echo &#x27;</span>&lt;span class=<span class="string">&quot;description&quot;</span>&gt;<span class="string">&#x27; . __(&#x27;</span>You <span class="keyword">do</span> not have media management permissions. To change your <span class="built_in">local</span> avatar, contact the blog administrator.<span class="string">&#x27;,&#x27;</span>simple-local-avatars<span class="string">&#x27;) . &#x27;</span>&lt;/span&gt;<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">?&gt;</span></span><br><span class="line"><span class="string">&lt;/td&gt;</span></span><br><span class="line"><span class="string">&lt;/tr&gt;</span></span><br><span class="line"><span class="string">&lt;/table&gt;</span></span><br><span class="line"><span class="string">&lt;script type=&quot;text/javascript&quot;&gt;var form = document.getElementById(&#x27;</span>your-profile<span class="string">&#x27;);form.encoding = &#x27;</span>multipart/form-data<span class="string">&#x27;;form.setAttribute(&#x27;</span>enctype<span class="string">&#x27;, &#x27;</span>multipart/form-data<span class="string">&#x27;);&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;?php</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">public function edit_user_profile_update( $user_id ) &#123;</span></span><br><span class="line"><span class="string">if ( ! isset( $_POST[&#x27;</span>_simple_local_avatar_nonce<span class="string">&#x27;] ) || ! wp_verify_nonce( $_POST[&#x27;</span>_simple_local_avatar_nonce<span class="string">&#x27;], &#x27;</span>simple_local_avatar_nonce<span class="string">&#x27; ) ) //security</span></span><br><span class="line"><span class="string">return;</span></span><br><span class="line"><span class="string">if ( ! empty( $_FILES[&#x27;</span>simple-local-avatar<span class="string">&#x27;][&#x27;</span>name<span class="string">&#x27;] ) ) &#123;</span></span><br><span class="line"><span class="string">$mimes = array(</span></span><br><span class="line"><span class="string">&#x27;</span>jpg|jpeg|jpe<span class="string">&#x27; =&gt; &#x27;</span>image/jpeg<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">&#x27;</span>gif<span class="string">&#x27; =&gt; &#x27;</span>image/gif<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">&#x27;</span>png<span class="string">&#x27; =&gt; &#x27;</span>image/png<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">&#x27;</span>bmp<span class="string">&#x27; =&gt; &#x27;</span>image/bmp<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">&#x27;</span>tif|tiff<span class="string">&#x27; =&gt; &#x27;</span>image/tiff<span class="string">&#x27;</span></span><br><span class="line"><span class="string">);</span></span><br><span class="line"><span class="string">// front end (theme my profile etc) support</span></span><br><span class="line"><span class="string">if ( ! function_exists( &#x27;</span>wp_handle_upload<span class="string">&#x27; ) )</span></span><br><span class="line"><span class="string">require_once( ABSPATH . &#x27;</span>wp-admin/includes/file.php<span class="string">&#x27; );</span></span><br><span class="line"><span class="string">$this-&gt;avatar_delete( $user_id ); // delete old images if successful</span></span><br><span class="line"><span class="string">// need to be more secure since low privelege users can upload</span></span><br><span class="line"><span class="string">if ( strstr( $_FILES[&#x27;</span>simple-local-avatar<span class="string">&#x27;][&#x27;</span>name<span class="string">&#x27;], &#x27;</span>.php<span class="string">&#x27; ) )</span></span><br><span class="line"><span class="string">wp_die(&#x27;</span>For security reasons, the extension <span class="string">&quot;.php&quot;</span> cannot be <span class="keyword">in</span> your file name.<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">$this-&gt;user_id_being_edited = $user_id; // make user_id known to unique_filename_callback function</span></span><br><span class="line"><span class="string">$avatar = wp_handle_upload( $_FILES[&#x27;</span>simple-local-avatar<span class="string">&#x27;], array( &#x27;</span>mimes<span class="string">&#x27; =&gt; $mimes, &#x27;</span>test_form<span class="string">&#x27; =&gt; false, &#x27;</span>unique_filename_callback<span class="string">&#x27; =&gt; array( $this, &#x27;</span>unique_filename_callback<span class="string">&#x27; ) ) );</span></span><br><span class="line"><span class="string">if ( empty($avatar[&#x27;</span>file<span class="string">&#x27;]) ) &#123; // handle failures</span></span><br><span class="line"><span class="string">switch ( $avatar[&#x27;</span>error<span class="string">&#x27;] ) &#123;</span></span><br><span class="line"><span class="string">case &#x27;</span>File <span class="built_in">type</span> does not meet security guidelines. Try another.<span class="string">&#x27; :</span></span><br><span class="line"><span class="string">add_action( &#x27;</span>user_profile_update_errors<span class="string">&#x27;, create_function(&#x27;</span><span class="variable">$a</span><span class="string">&#x27;,&#x27;</span><span class="variable">$a</span>-&gt;add(<span class="string">&quot;avatar_error&quot;</span>,__(<span class="string">&quot;Please upload a valid image file for the avatar.&quot;</span>,<span class="string">&quot;simple-local-avatars&quot;</span>));<span class="string">&#x27;) );</span></span><br><span class="line"><span class="string">break;</span></span><br><span class="line"><span class="string">default :</span></span><br><span class="line"><span class="string">add_action( &#x27;</span>user_profile_update_errors<span class="string">&#x27;, create_function(&#x27;</span><span class="variable">$a</span><span class="string">&#x27;,&#x27;</span><span class="variable">$a</span>-&gt;add(<span class="string">&quot;avatar_error&quot;</span>,<span class="string">&quot;&lt;strong&gt;&quot;</span>.__(<span class="string">&quot;There was an error uploading the avatar:&quot;</span>,<span class="string">&quot;simple-local-avatars&quot;</span>).<span class="string">&quot;&lt;/strong&gt; &#x27; . esc_attr( <span class="variable">$avatar</span>[&#x27;error&#x27;] ) . &#x27;&quot;</span>);<span class="string">&#x27;) );</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">return;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">update_user_meta( $user_id, &#x27;</span>simple_local_avatar<span class="string">&#x27;, array( &#x27;</span>full<span class="string">&#x27; =&gt; $avatar[&#x27;</span>url<span class="string">&#x27;] ) ); // save user information (overwriting old)</span></span><br><span class="line"><span class="string">&#125; elseif ( ! empty( $_POST[&#x27;</span>simple-local-avatar-erase<span class="string">&#x27;] ) ) &#123;</span></span><br><span class="line"><span class="string">$this-&gt;avatar_delete( $user_id );</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">/**</span></span><br><span class="line"><span class="string">* remove the custom get_avatar hook for the default avatar list output on options-discussion.php</span></span><br><span class="line"><span class="string">*/</span></span><br><span class="line"><span class="string">public function avatar_defaults( $avatar_defaults ) &#123;</span></span><br><span class="line"><span class="string">remove_action( &#x27;</span>get_avatar<span class="string">&#x27;, array( $this, &#x27;</span>get_avatar<span class="string">&#x27; ) );</span></span><br><span class="line"><span class="string">return $avatar_defaults;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">/**</span></span><br><span class="line"><span class="string">* delete avatars based on user_id</span></span><br><span class="line"><span class="string">*/</span></span><br><span class="line"><span class="string">public function avatar_delete( $user_id ) &#123;</span></span><br><span class="line"><span class="string">$old_avatars = get_user_meta( $user_id, &#x27;</span>simple_local_avatar<span class="string">&#x27;, true );</span></span><br><span class="line"><span class="string">$upload_path = wp_upload_dir();</span></span><br><span class="line"><span class="string">if ( is_array($old_avatars) ) &#123;</span></span><br><span class="line"><span class="string">foreach ($old_avatars as $old_avatar ) &#123;</span></span><br><span class="line"><span class="string">$old_avatar_path = str_replace( $upload_path[&#x27;</span>baseurl<span class="string">&#x27;], $upload_path[&#x27;</span>basedir<span class="string">&#x27;], $old_avatar );</span></span><br><span class="line"><span class="string">@unlink( $old_avatar_path );</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">delete_user_meta( $user_id, &#x27;</span>simple_local_avatar<span class="string">&#x27; );</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">public function unique_filename_callback( $dir, $name, $ext ) &#123;</span></span><br><span class="line"><span class="string">$user = get_user_by( &#x27;</span><span class="built_in">id</span><span class="string">&#x27;, (int) $this-&gt;user_id_being_edited );</span></span><br><span class="line"><span class="string">$name = $base_name = sanitize_file_name( $user-&gt;display_name . &#x27;</span>_avatar<span class="string">&#x27; );</span></span><br><span class="line"><span class="string">$number = 1;</span></span><br><span class="line"><span class="string">while ( file_exists( $dir . &quot;/$name$ext&quot; ) ) &#123;</span></span><br><span class="line"><span class="string">$name = $base_name . &#x27;</span>_<span class="string">&#x27; . $number;</span></span><br><span class="line"><span class="string">$number++;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">return $name . $ext;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">$simple_local_avatars = new Simple_Local_Avatars;</span></span><br><span class="line"><span class="string">/**</span></span><br><span class="line"><span class="string">* more efficient to call simple local avatar directly in theme and avoid gravatar setup</span></span><br><span class="line"><span class="string">*</span></span><br><span class="line"><span class="string">* @param int|string|object $id_or_email A user ID, email address, or comment object</span></span><br><span class="line"><span class="string">* @param int $size Size of the avatar image</span></span><br><span class="line"><span class="string">* @param string $default URL to a default image to use if no avatar is available</span></span><br><span class="line"><span class="string">* @param string $alt Alternate text to use in image tag. Defaults to blank</span></span><br><span class="line"><span class="string">* @return string &lt;img&gt; tag for the user&#x27;</span>s avatar</span><br><span class="line"> </span><br><span class="line">*/</span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> get_simple_local_avatar( <span class="variable">$id_or_email</span>, <span class="variable">$size</span> = <span class="string">&#x27;96&#x27;</span>, <span class="variable">$default</span> = <span class="string">&#x27;&#x27;</span>, <span class="variable">$alt</span> = <span class="literal">false</span> ) &#123;</span><br><span class="line"> </span><br><span class="line">global <span class="variable">$simple_local_avatars</span>;</span><br><span class="line"> </span><br><span class="line"><span class="variable">$avatar</span> = <span class="variable">$simple_local_avatars</span>-&gt;get_avatar( <span class="string">&#x27;&#x27;</span>, <span class="variable">$id_or_email</span>, <span class="variable">$size</span>, <span class="variable">$default</span>, <span class="variable">$alt</span> );</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> ( empty ( <span class="variable">$avatar</span> ) )</span><br><span class="line"> </span><br><span class="line"><span class="variable">$avatar</span> = get_avatar( <span class="variable">$id_or_email</span>, <span class="variable">$size</span>, <span class="variable">$default</span>, <span class="variable">$alt</span> );</span><br><span class="line"> </span><br><span class="line"><span class="built_in">return</span> <span class="variable">$avatar</span>;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">/**</span><br><span class="line"> </span><br><span class="line">* on uninstallation, remove the custom field from the <span class="built_in">users</span> and delete the <span class="built_in">local</span> avatars</span><br><span class="line"> </span><br><span class="line">*/</span><br><span class="line"> </span><br><span class="line">register_uninstall_hook( __FILE__, <span class="string">&#x27;simple_local_avatars_uninstall&#x27;</span> );</span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">simple_local_avatars_uninstall</span></span>() &#123;</span><br><span class="line"> </span><br><span class="line"><span class="variable">$simple_local_avatars</span> = new Simple_Local_Avatars;</span><br><span class="line"> </span><br><span class="line"><span class="variable">$users</span> = get_users_of_blog();</span><br><span class="line"> </span><br><span class="line">foreach ( <span class="variable">$users</span> as <span class="variable">$user</span> )</span><br><span class="line"> </span><br><span class="line"><span class="variable">$simple_local_avatars</span>-&gt;avatar_delete( <span class="variable">$user</span>-&gt;user_id );</span><br><span class="line"> </span><br><span class="line">delete_option(<span class="string">&#x27;simple_local_avatars_caps&#x27;</span>);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="四、-Gravatar-集成"><a href="#四、-Gravatar-集成" class="headerlink" title="四、_Gravatar_集成"></a>四、_<strong>Gravatar</strong>_集成</h2><p>1 、注意，以下主题因为使用自有的头像方案，完全屏蔽了 Gravatar，所以也不支持 Cravatar： 7b2 日主题 子比主题 2 、对于此类主题、插件仍需适配 Cravatar？请到支持论坛中开贴↗获取帮助。 3 、如果您是普通用户不想要改代码，快速使用请安装文派头像 （WPAvatar）↗插件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">您可以很方便的为 WordPress 集成 Cravatar 头像服务，只需要将以下代码加入您的插件或主题的 functions.php 里即可：</span><br></pre></td></tr></table></figure><blockquote><p>Cravatar 官网文档：<code>https://cravatar.com/developer/for-wordpress</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ( ! function_exists( <span class="string">&#x27;get_cravatar_url&#x27;</span> ) ) &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 替换 Gravatar 头像为 Cravatar 头像</span><br><span class="line">     *</span><br><span class="line">     * Cravatar 是 Gravatar 在中国的完美替代方案，您可以在 https://cravatar.com 更新您的头像</span><br><span class="line">     */</span><br><span class="line">    <span class="keyword">function</span> get_cravatar_url( <span class="variable">$url</span> ) &#123;</span><br><span class="line">        <span class="variable">$sources</span> = array(</span><br><span class="line">            <span class="string">&#x27;www.gravatar.com&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;0.gravatar.com&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;1.gravatar.com&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;2.gravatar.com&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;secure.gravatar.com&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;cn.gravatar.com&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;gravatar.com&#x27;</span>,</span><br><span class="line">        );</span><br><span class="line">        <span class="built_in">return</span> str_replace( <span class="variable">$sources</span>, <span class="string">&#x27;cravatar.cn&#x27;</span>, <span class="variable">$url</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    add_filter( <span class="string">&#x27;um_user_avatar_url_filter&#x27;</span>, <span class="string">&#x27;get_cravatar_url&#x27;</span>, 1 );</span><br><span class="line">    add_filter( <span class="string">&#x27;bp_gravatar_url&#x27;</span>, <span class="string">&#x27;get_cravatar_url&#x27;</span>, 1 );</span><br><span class="line">    add_filter( <span class="string">&#x27;get_avatar_url&#x27;</span>, <span class="string">&#x27;get_cravatar_url&#x27;</span>, 1 );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> ( ! function_exists( <span class="string">&#x27;set_defaults_for_cravatar&#x27;</span> ) ) &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 替换 WordPress 讨论设置中的默认头像</span><br><span class="line">     */</span><br><span class="line">    <span class="keyword">function</span> set_defaults_for_cravatar( <span class="variable">$avatar_defaults</span> ) &#123;</span><br><span class="line">        <span class="variable">$avatar_defaults</span>[<span class="string">&#x27;gravatar_default&#x27;</span>] = <span class="string">&#x27;Cravatar 标志&#x27;</span>;</span><br><span class="line">        <span class="built_in">return</span> <span class="variable">$avatar_defaults</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    add_filter( <span class="string">&#x27;avatar_defaults&#x27;</span>, <span class="string">&#x27;set_defaults_for_cravatar&#x27;</span>, 1 );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> ( ! function_exists( <span class="string">&#x27;set_user_profile_picture_for_cravatar&#x27;</span> ) ) &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 替换个人资料卡中的头像上传地址</span><br><span class="line">     */</span><br><span class="line">    <span class="keyword">function</span> <span class="function"><span class="title">set_user_profile_picture_for_cravatar</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="string">&#x27;&lt;a href=&quot;https://cravatar.com&quot; target=&quot;_blank&quot;&gt; 您可以在 Cravatar 修改您的资料图片&lt;/a&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    add_filter( <span class="string">&#x27;user_profile_picture_description&#x27;</span>, <span class="string">&#x27;set_user_profile_picture_for_cravatar&#x27;</span>, 1 );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>您可以在 <em><strong>Cravatar</strong></em> 修改您的资料图片：<a href="https://blog.mingliang.net.cn/go/?url=https://cn.cravatar.com/avatars">https://cn.cravatar.com/avatars</a></p><!-- 这是一张图片，ocr 内容为： --><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/Cravatar/3.png"></p><p>至此三种配置方法已经完成，希望能帮助到您</p></div>]]></content>
      
      
      <categories>
          
          <category> 技术分享 </category>
          
          <category> Cravatar </category>
          
          <category> Wordpress </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Wordpress </tag>
            
            <tag> 技术分享 </tag>
            
            <tag> Cravatar </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>人机验证解决VAPTCHA</title>
      <link href="/2023/12/14/%E4%BA%BA%E6%9C%BA%E9%AA%8C%E8%AF%81%E8%A7%A3%E5%86%B3VAPTCHA/"/>
      <url>/2023/12/14/%E4%BA%BA%E6%9C%BA%E9%AA%8C%E8%AF%81%E8%A7%A3%E5%86%B3VAPTCHA/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><h2 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h2><p>CAPTCHA 是“Completely Automated Public Turing Test* to Tell Humans Apart（全自动区分计算机和人类的图灵测试）”的首字母缩写。它是指各种认证方法，这些方法利用一个对于人类来说很简单但对机器来说很难的挑战来测试用户，以验证用户是否为人类。 CAPTCHA 可防止诈骗者和垃圾邮件发送者使用机器人填写用于恶意目的的 Web 表单。</p><p>传统 CAPTCHA 要求用户阅读并正确重新输入无法通过光学字符识别 (OCR) 技术解释的失真文本。 最新的 CAPTCHA 技术使用 AI 驱动的行为和风险分析，根据活动模式（而不是单个离散任务）对人类用户进行认证。</p><p>许多网站都要求用户在登录到帐户档案、提交注册表、发表评论或执行黑客可能使用机器人执行的某些其他操作之前回答 CAPTCHA 问题。 回答这种问题，即表明用户是人类，并被允许在网站上继续执行活动。</p><p>注意事项：</p><ul><li>如果你使用的主题后台有CAPTCHA的API调用接口，您直接调用即可  </li><li>如果你使用的主题后台没有CAPTCHA的API调用接口，则您需要自己部署代码然后调用CAPTCHA的API接口实现人机验证</li></ul><h2 id="二、主题有自带"><a href="#二、主题有自带" class="headerlink" title="二、主题有自带"></a>二、主题有自带</h2><h3 id="2-1、注册"><a href="#2-1、注册" class="headerlink" title="2.1、注册"></a>2.1、注册</h3><p>CAPTCHA官网：<a href="https://blog.mingliang.net.cn/go/?url=https://www.vaptcha.com/">https://www.vaptcha.com/</a></p><h3 id="2-2、创建验证单元"><a href="#2-2、创建验证单元" class="headerlink" title="2.2、创建验证单元"></a>2.2、创建验证单元</h3><p>完成注册后，您将能够在管理界面中生成CAPTCHA的验证ID（VID）和密钥（KEY）。随后，只需在后台的主题设置中进行相应的配置即可启用CAPTCHA功能。</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/VAPTCHA/1.png"></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/VAPTCHA/2.png"></p><h3 id="2-3、后台设置"><a href="#2-3、后台设置" class="headerlink" title="2.3、后台设置"></a>2.3、后台设置</h3><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/VAPTCHA/3.png"></p><h2 id="三、主题没有自带"><a href="#三、主题没有自带" class="headerlink" title="三、主题没有自带"></a>三、主题没有自带</h2><h3 id="3-1、代码配置"><a href="#3-1、代码配置" class="headerlink" title="3.1、代码配置"></a>3.1、代码配置</h3><p>配置流程：</p><ul><li>创建验证单元，获取VID和Key 。点击创建。  </li><li>将<code>https://v-cn.vaptcha.com/v3.js</code>引入到你的页面。  </li><li>将 VAPTCHA 初始化到你需要的位置，具体 web 端部署请查看：Web 客户端部署。  </li><li>用户验证通过得到token，与表单数据一同提交到服务端。  </li><li>服务端得到token后，向 VAPTCHA 服务器验证token的有效性，验证通过说明此次请求有效，服务端验证流程请查看：服务端二次验证。</li></ul><p>本文不深入探讨具体的部署步骤，若需了解详细的部署流程，您请参阅 <a href="https://blog.mingliang.net.cn/go/?url=http://CAPTCHA%E5%AE%98%E7%BD%91%E6%B3%A8%E5%86%8C%E5%9C%B0%E5%9D%80%EF%BC%9Ahttps://www.vaptcha.com/">CAPTCHA 官方提供的配置指南</a>。</p><h3 id="3-2、插件"><a href="#3-2、插件" class="headerlink" title="3.2、插件"></a>3.2、插件</h3><blockquote><p>VAPTCHA下载：<a href="https://pan.baidu.com/s/1sqwhLY4g8t0-0iQoPOHKJQ?pwd=kupa">https://pan.baidu.com/s/1sqwhLY4g8t0-0iQoPOHKJQ?pwd=kupa</a><br>提取码：kupa</p></blockquote><p>上传安装插件之后即可在后台配置</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/VAPTCHA/4.png"></p></div>]]></content>
      
      
      <categories>
          
          <category> 技术分享 </category>
          
          <category> Wordpress </category>
          
          <category> VAPTCHA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Wordpress </tag>
            
            <tag> 技术分享 </tag>
            
            <tag> VAPTCHA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站提交搜索引擎</title>
      <link href="/2023/05/08/%E7%BD%91%E7%AB%99%E6%8F%90%E4%BA%A4%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/"/>
      <url>/2023/05/08/%E7%BD%91%E7%AB%99%E6%8F%90%E4%BA%A4%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/</url>
      
        <content type="html"><![CDATA[<div id="postchat_postcontent"><h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>将<a href="https://blog.mingliang.net.cn/go/?url=https://mingliang.net.cn/"><em><strong>网站</strong></em></a>提交给搜索引擎是为了让搜索引擎更早地了解、索引和显示您的网站内容。以下是一些提交网站给搜索引擎的理由：</p><p>提高可见性：通过将您的网站提交给搜索引擎，可以提高您的网站在搜索结果中出现的机会。当用户搜索与您的网站相关的关键词时，搜索引擎将更容易找到并显示您的网站。<br>更快索引网页：搜索引擎通过网络爬虫（也称为<strong>蜘蛛</strong>）来发现新的网页内容。尽管搜索引擎蜘蛛会定期自动抓取和索引网页，但对于新建立的网站或刚发布的新内容，手动提交可以加快搜索引擎对您网站的索引速度。<br>更新通知：如果您的网站经常发布新的内容或更新现有内容，手动提交网站给搜索引擎可以让它们意识到您的网站有新的变化，以便更及时地更新索引。<br>修复索引问题：有时候，搜索引擎可能无法正确索引您的网站或内容，导致网站排名下降或无法出现在搜索结果中。在这种情况下，通过重新提交网站可以帮助搜索引擎重新审视和索引您的网站，以解决问题。</p><p>需要注意的是，尽管提交网站给搜索引擎可以加快索引速度和提高可见性，但并不保证搜索引擎会立即或完全索引您的网站。搜索引擎的索引算法是复杂的，排名和显示结果是基于多个因素综合考虑的。因此，除了提交网站给搜索引擎，还应该关注网站内容的质量、结构优化、外部链接等方面，以提高搜索引擎优化（<em><strong>SEO</strong></em>）效果。</p><h2 id="二、sitemap"><a href="#二、sitemap" class="headerlink" title="二、sitemap"></a>二、sitemap</h2><p>什么是网站地图？</p><p><strong>sitemap</strong>是一种视觉指南，它以图形化的形式展示网站的结构和内容布局。它帮助用户轻松导航，提升用户体验，并辅助搜索引擎优化。网站地图可以是规划、设计和维护网站时的关键工具，确保信息架构的清晰和易于访问。</p><h3 id="2-1、插件生成站点地图"><a href="#2-1、插件生成站点地图" class="headerlink" title="2.1、插件生成站点地图"></a>2.1、插件生成站点地图</h3><p>使用<strong>Yoast SEO</strong>插件可以自动生成<strong>sitemap</strong></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/SEO/1.png"></p><h3 id="2-2、工具生成网站地图"><a href="#2-2、工具生成网站地图" class="headerlink" title="2.2、工具生成网站地图"></a>2.2、工具生成网站地图</h3><p>工具链接：<a href="https://blog.mingliang.net.cn/go/?url=https://www.xml-sitemaps.com/">https://www.xml-sitemaps.com/</a></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/SEO/2.png"></p><p>将生成的网站 <strong>sitemap.xml</strong> 文件上传至网站根目录后，搜索引擎就能更高效地抓取和索引页面内容，有助于提升网站在搜索结果中的可见性。确保文件路径正确，一般应为类似<code>https://www.yourdomain.com/sitemap.xml</code>的访问方式。</p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/SEO/3.png"></p><h2 id="三、Bing"><a href="#三、Bing" class="headerlink" title="三、Bing"></a>三、Bing</h2><p><strong>Bing</strong>搜索引擎提交入口：<a href="https://blog.mingliang.net.cn/go/?url=https://www.bing.com/webmasters">https://www.bing.com/webmasters</a></p><p><strong>Bing</strong>网站管理后台提交站点<strong>sitemap</strong></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/SEO/4.png"></p><p><strong>Bing</strong>提交相关文章：<a href="https://blog.mingliang.net.cn/go/?url=https://www.szlogic.net/learn/seo/site-submit/">https://www.szlogic.net/learn/seo/site-submit/</a></p><h2 id="四、百度"><a href="#四、百度" class="headerlink" title="四、百度"></a>四、百度</h2><p>百度搜索引擎提交入口：<a href="https://ziyuan.baidu.com/property/index">https://ziyuan.baidu.com/property/index</a></p><p>百度的平台公告已经发布了“关于回收网站提交配额的通知”该政策是因为需要打击灰产、低质量和未实名认证的网站，官方的完整说明：“由于近期黑产、作弊行为肆虐，大量抢占平台资源，严重影响用户体验，搜索资源平台针对非实名账户内站点、低质站点关停sitemap提交能力并调整API每日推送额度。请各站点做好日常维护和质量管理，资源平台将在节后陆续为合规站点恢复权益、调配额度。</p><h3 id="4-1、sitemap提交"><a href="#4-1、sitemap提交" class="headerlink" title="4.1、sitemap提交"></a>4.1、sitemap提交</h3><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/SEO/5.png"></p><h3 id="4-2、手动提交"><a href="#4-2、手动提交" class="headerlink" title="4.2、手动提交"></a>4.2、手动提交</h3><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/SEO/6.png"></p><p><strong>百度</strong>提交相关文章：<a href="https://blog.mingliang.net.cn/go/?url=https://www.szlogic.net/learn/seo/site-submit/">https://www.szlogic.net/learn/seo/site-submit/</a></p><h2 id="五、Google"><a href="#五、Google" class="headerlink" title="五、Google"></a>五、Google</h2><p><strong>Google</strong>搜索引擎提交入口：<a href="https://blog.mingliang.net.cn/go/?url=https://search.google.com/search-console/about">https://search.google.com/search-console/about</a></p><p><img src="https://lanantrees.mingliang.net.cn/hexo/%E6%96%87%E7%AB%A0/SEO/7.png"></p><p>使用<strong>Yoast SEO</strong>插件生成并提交网站的<strong>sitemap</strong>后，有时候可能会遇到<strong>Google</strong>搜索控制台提示<strong>无法检索</strong>的情况，其实这时候不必过于担心，通常过一会儿系统会自动显示成功，或者在你提交第二个网站地图后，问题也会自动解决。</p><p>当然你可以直接使用上面通过在线工具生成的<strong>sitemap.xml</strong>地图，这样能够方便快捷地为网站整理出结构清晰的索引，有助于搜索引擎更好地抓取和识别网页内容。 </p></div>]]></content>
      
      
      <categories>
          
          <category> 技术分享 </category>
          
          <category> SEO </category>
          
          <category> 网站地图 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术分享 </tag>
            
            <tag> SEO </tag>
            
            <tag> 网站地图 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
